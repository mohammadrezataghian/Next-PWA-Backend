"use strict";(self.webpackChunknew_ui=self.webpackChunknew_ui||[]).push([[638],{45638:(e,n,a)=>{a.r(n),a.d(n,{default:()=>T});var t=a(72791),r=a(96015),s=a(94162),o=a(91888);var c=a(39230),l=a(80184);var d=a(48313),i=a(79917),u=a(81096),v=a(88329),g=a(86775);a(36009);const b=async e=>{var n;const a=v.Z.get("user")&&(null===(n=JSON.parse(v.Z.get("user")))||void 0===n?void 0:n.IdPerson);(0,g.S)("POST","".concat("/api/Acc/PersonHesabList"),!0,{idPerson:a}).then((n=>{var a;1===n.data.resCode?e(null===n||void 0===n||null===(a=n.data)||void 0===a?void 0:a.Data):(0,i.Z)("error",n.data.resMessage,!1)}))};var m=a(48928);const h=e=>{let{title:n,content:a,i18n:r}=e;return(0,l.jsx)(t.Fragment,{children:(0,l.jsxs)(s.Z,{direction:"en"===(null===r||void 0===r?void 0:r.language)?"row":"row-reverse",justifyContent:"space-between",width:"100%",children:[(0,l.jsx)("p",{children:n}),(0,l.jsx)("p",{children:a})]})})};var Z=a(91397);const x=e=>{var n;let{element:a}=e;const r=null===(n=(0,t.useContext)(u.k))||void 0===n?void 0:n.LanguageArray,{i18n:s}=(0,c.$G)();return(0,l.jsxs)(t.Fragment,{children:[(0,l.jsx)(h,{title:"".concat((0,Z.Z)("bank-account-list-input-card-number",r),":"),content:null===a||void 0===a?void 0:a.FldShomareCart,i18n:s}),(0,l.jsx)(h,{title:"".concat((0,Z.Z)("bank-account-list-input-account-number",r),":"),content:null===a||void 0===a?void 0:a.FldHesabNo,i18n:s}),(0,l.jsx)(h,{title:"".concat((0,Z.Z)("bank-account-list-shaba-number",r),":"),content:null===a||void 0===a?void 0:a.FldShomareShaba,i18n:s})]})},S=async(e,n)=>{var a;const t=v.Z.get("user")&&(null===(a=JSON.parse(v.Z.get("user")))||void 0===a?void 0:a.IdPerson);(0,g.S)("POST","".concat("/api/Acc/ActivePersonHesab"),!0,{idPerson:t,id:e}).then((e=>{1===e.data.resCode?(0,i.Z)("success",e.data.resMessage,!1).then((()=>n((e=>!e)))):(0,i.Z)("error",e.data.resMessage,!1)}))},k=async(e,n)=>{var a;const t=v.Z.get("user")&&(null===(a=JSON.parse(v.Z.get("user")))||void 0===a?void 0:a.IdPerson);(0,g.S)("POST","".concat("/api/Acc/DeActivePersonHesab"),!0,{idPerson:t,id:e}).then((e=>{1===e.data.resCode?(0,i.Z)("success",e.data.resMessage,!1).then((()=>n((e=>!e)))):(0,i.Z)("error",e.data.resMessage,!1)}))};var j=a(17205),p=a(46843);const F=e=>{var n;let{ActivateBankAccount:a,id:r,setForceRender:s}=e;const o=null===(n=(0,t.useContext)(u.k))||void 0===n?void 0:n.LanguageArray,c=(0,Z.Z)("bank-account-list-alert-sure-delete");return(0,l.jsxs)(t.Fragment,{children:[(0,l.jsx)(j.Z,{color:"colorPrimer",variant:"contained",fullWidth:!0,onClick:e=>{a(r,s),e.stopPropagation()},disabled:(0,p.Z)("bank-account-list-btn-activate-account"),children:(0,Z.Z)("bank-account-list-btn-activate-bank-account",o)}),(0,l.jsx)(j.Z,{color:"error",variant:"contained",onClick:e=>{e.stopPropagation(),(0,i.Z)("warning",c,!0,(()=>{(async(e,n)=>{var a;const t=v.Z.get("user")&&(null===(a=JSON.parse(v.Z.get("user")))||void 0===a?void 0:a.IdPerson);(0,g.S)("POST","".concat("/api/Acc/DeletePersonHesab"),!0,{idPerson:t,id:e}).then((e=>{1===e.data.resCode?(0,i.Z)("success",e.data.resMessage,!1).then((()=>n((e=>!e)))):(0,i.Z)("error",e.data.resMessage,!1)}))})(r,s)}))},disabled:(0,p.Z)("bank-account-list-btn-delete-account"),children:(0,Z.Z)("general-public-label-delete",o)})]})},P=e=>{var n;let{DeactiveBankAccount:a,id:r,setForceRender:s}=e;const o=null===(n=(0,t.useContext)(u.k))||void 0===n?void 0:n.LanguageArray;return(0,l.jsx)(j.Z,{disabled:(0,p.Z)("bank-account-list-btn-deactivate-account"),color:"error",variant:"contained",fullWidth:!0,onClick:e=>{a(r,s),e.stopPropagation()},children:(0,Z.Z)("bank-account-list-btn-deactivate-bank-account",o)})},A=e=>{let{id:n,setForceRender:a,ActiveHesab:r}=e;const{i18n:o}=(0,c.$G)();return(0,l.jsx)(t.Fragment,{children:(0,l.jsx)(s.Z,{alignItems:"center",direction:"en"===(null===o||void 0===o?void 0:o.language)?"row":"row-reverse",spacing:1,width:"100%",className:"account-operations-color-design",children:r?(0,l.jsx)(P,{DeactiveBankAccount:k,id:n,setForceRender:a}):(0,l.jsx)(F,{ActivateBankAccount:S,id:n,setForceRender:a})})})};var C=a(73736);const I=e=>{var n;let{GlobalConstants:a,setSelectedElement:r,element:o,setForceRender:c,SelectedElement:d}=e;return(0,l.jsx)(t.Fragment,{children:(0,l.jsx)(m.Z,{sx:{width:"100%",p:"1em",border:d&&(null===(n=d[0])||void 0===n?void 0:n.FldId)===o.FldId?"2px solid #88d4d4":"unset"},onClick:e=>{r([o]),e.stopPropagation()},children:(0,l.jsxs)(s.Z,{alignItems:"flex-end",spacing:1,children:[(0,l.jsx)("h4",{style:{textAlign:"center",width:"100%"},children:(0,C.J)(null===o||void 0===o?void 0:o.NameBank)}),(0,l.jsx)("br",{}),(0,l.jsx)(x,{element:o}),(0,l.jsx)(A,{id:null===o||void 0===o?void 0:o.FldId,setForceRender:c,ActiveHesab:null===o||void 0===o?void 0:o.ActiveHesab})]})},a.uuidV4())})},y=e=>{let{forceRender:n,setForceRender:a,setSelectedElement:c,SelectedElement:i,languageArray:v}=e;const{gatheredData:g}=(0,d.Z)(b,n),m=(0,t.useContext)(u.k);return(0,l.jsxs)(t.Fragment,{children:[(0,l.jsx)(l.Fragment,{}),(0,l.jsx)(r.Z,{sx:{marginTop:"1em"},children:(0,l.jsx)(s.Z,{spacing:1,children:g?null===g||void 0===g?void 0:g.map((e=>(0,l.jsx)(I,{GlobalConstants:m,setSelectedElement:c,element:e,setForceRender:a,SelectedElement:i},m.uuidV4()))):(0,l.jsx)(o.Z,{color:"colorPrimer"})})})]})};var f=a(9396),w=a(9181),N=a(61134);const R=async e=>{var n;const a=v.Z.get("user")&&(null===(n=JSON.parse(v.Z.get("user")))||void 0===n?void 0:n.IdPerson);(0,g.S)("POST","".concat("/api/Acc/BankList"),!0,{idPerson:a}).then((n=>{var a,t;1===n.data.resCode?e(null===n||void 0===n||null===(a=n.data)||void 0===a||null===(t=a.Data)||void 0===t?void 0:t.map((e=>({ItemValue:e.FldId,ItemContent:(0,C.J)(e.FldName)})))):(0,i.Z)("error",n.data.resMessage,!1)}))},O={Id:0,idBank:"",hesabNo:"",shomareCart:"",shomareSheba:""};var M=a(92186),B=a(27965),H=a(3504);const J=(e,n)=>{var a;let[r]=n;const[s,o]=t.useState([]),c=null===(a=(0,t.useContext)(u.k))||void 0===a?void 0:a.LanguageArray,d=[(0,Z.Z)("bank-account-list-select-bank",c),(0,Z.Z)("bank-account-list-input-card-number",c),(0,Z.Z)("bank-account-list-input-account-number",c),(0,Z.Z)("bank-account-list-shaba-number",c)];return t.useMemo((()=>{o([{element:(0,l.jsx)(M.Z,{SelectableDataArray:e,label:d[0],isSingle:!0,editable:r,value:(0,C.J)(null===r||void 0===r?void 0:r.NameBank)}),name:"idBank",required:!0},{element:r?(0,l.jsx)(H.Z,{value:r.FldShomareCart,label:d[1]}):(0,l.jsx)(B.Z,{label:d[1]}),name:"shomareCart",required:!0},{element:r?(0,l.jsx)(H.Z,{value:r.FldHesabNo,label:d[2]}):(0,l.jsx)(B.Z,{label:d[2]}),name:"hesabNo",required:!0},{element:r?(0,l.jsx)(H.Z,{value:r.FldShomareShaba,label:d[3]}):(0,l.jsx)(B.Z,{label:d[3]}),name:"shomareSheba",required:!0}])}),[e,r,JSON.stringify(d)]),s},D=e=>{let{forceRender:n,setForceRender:a,SelectedElement:r,languageArray:o}=e;const{control:c,formState:u,handleSubmit:b}=(0,N.cI)({defaultValues:O}),{gatheredData:m}=(0,d.Z)(R,n);return(0,l.jsx)(t.Fragment,{children:(0,l.jsx)("form",{onSubmit:b((e=>{!r.length>0?(async(e,n)=>{var a;const t=v.Z.get("user")&&(null===(a=JSON.parse(v.Z.get("user")))||void 0===a?void 0:a.IdPerson);(0,g.S)("POST","".concat("/api/Acc/AddPersonHesab"),!0,{idPerson:t,...e}).then((e=>{1===e.data.resCode?(0,i.Z)("success",e.data.resMessage,!1).then((()=>n((e=>!e)))):(0,i.Z)("error",e.data.resMessage,!1)}))})(e,a):(async(e,n)=>{var a;const t=v.Z.get("user")&&(null===(a=JSON.parse(v.Z.get("user")))||void 0===a?void 0:a.IdPerson);console.log("ACC=>",e),(0,g.S)("POST","".concat("/api/Acc/UpdatePersonHesab"),!0,{idPerson:t,...e}).then((e=>{1===e.data.resCode?(0,i.Z)("success",e.data.resMessage,!1).then((()=>n((e=>!e)))):(0,i.Z)("error",e.data.resMessage,!1)}))})({...e,Id:r[0].FldId,idBank:m.filter((n=>n.ItemContent===e.idBank||n.ItemValue===e.idBank))[0].ItemValue},a)})),children:(0,l.jsxs)(s.Z,{marginTop:"1em",spacing:1,children:[(0,l.jsx)(w.Z,{control:c,formState:u,DataArray:J(m,r)}),(0,l.jsx)(f.Z,{disabled:(0,p.Z)("bank-account-list-btn-add-new-account"),label:!r.length>0?(0,Z.Z)("bank-account-list-btn-add-new-bank-account",o):(0,Z.Z)("bank-account-list-btn-edit-bank-account",o)})]})})})};var E=a(20803);const T=()=>{var e;const n=null===(e=(0,t.useContext)(u.k))||void 0===e?void 0:e.LanguageArray,[a,r]=t.useState(!1),[s,o]=t.useState([]);return(0,l.jsx)(t.Fragment,{children:(0,l.jsxs)(E.Z,{maxWidth:"md",children:[(0,l.jsx)(y,{forceRender:a,setForceRender:r,setSelectedElement:o,SelectedElement:s,languageArray:n}),(0,l.jsx)(D,{setForceRender:r,SelectedElement:s,forceRender:a,languageArray:n})]})})}}}]);
//# sourceMappingURL=638.9e61fe59.chunk.js.map