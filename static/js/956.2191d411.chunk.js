"use strict";(self.webpackChunknew_ui=self.webpackChunknew_ui||[]).push([[956],{76313:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(72791);const i=e=>{const[t,n]=a.useState(null);a.useEffect((()=>{const e=sessionStorage.getItem("userFile");e&&e.length>0&&n(JSON.parse(e));const t=e=>{if("userFile"===e.key){const t=e.newValue;n(t&&t.length>0?t:null)}};return window.addEventListener("storage",t),()=>{window.removeEventListener("storage",t)}}),[]);const i=null===e||void 0===e?void 0:e.sort(((e,n)=>{if(t){const a=t.indexOf(e.Id),i=t.indexOf(n.Id);return-1===a?1:-1===i?-1:a-i}}));return t?i:e}},50494:(e,t,n)=>{n.d(t,{_:()=>a});const a=(0,n(1330).cn)(!1)},8171:(e,t,n)=>{n.d(t,{Z:()=>E});var a=n(72791),i=n(82873),o=n(20803),r=n(94162),s=n(80184);const l=e=>{let{ImageSource:t,paragraph:n,clickable:i,navigate:o,path:l,Patient:c,func:d,setForceRender:u,i18n:g}=e;return(0,s.jsx)(a.Fragment,{children:t?(0,s.jsxs)(r.Z,{direction:"en"===(null===g||void 0===g?void 0:g.language)?"row":"row-reverse",spacing:2,sx:{cursor:i&&"pointer"},onClick:()=>{c&&window.sessionStorage.setItem("patient",JSON.stringify(c)),l&&o(l),d&&d(c,u)},children:[(0,s.jsx)("img",{src:t,alt:null!==n&&void 0!==n?n:"unknown",width:20,height:20,loading:"..."}),i?(0,s.jsx)("h4",{children:n}):(0,s.jsx)("p",{style:{textAlign:"en"===(null===g||void 0===g?void 0:g.language)&&"left"},children:n})]}):(0,s.jsx)(s.Fragment,{})})};var c=n(79917),d=n(91397),u=n(86775);n(36009);var g=n(81096),v=n(46843),m=n(57689);const p=()=>{const e=(0,d.Z)("current-patients-alert-confirm-cancel-redirect"),t=(0,d.Z)("current-patients-alert-cancel-successful");return(n,a)=>{(0,c.Z)("warning",e,!0,(()=>{(0,u.S)("POST","".concat("/api/DoctorWorkList/CancelErja"),!0,{idAppWorkList:null===n||void 0===n?void 0:n.Id,idPerson:null===n||void 0===n?void 0:n.IdPerson,cancleCouse:""}).then((e=>{1===e.data.resCode?((0,c.Z)("success",t,!1),a((e=>!e))):(0,c.Z)("warning",e.data.resMessage,!1)}))}))}};var I=n(40918),S=n(97645),h=n(50494);const f=(e,t,n)=>{var i;const o=(0,I.Z)(),r=null===(i=(0,a.useContext)(g.k))||void 0===i?void 0:i.LanguageArray,{pathname:s}=(0,m.TH)(),l=p(),[,f]=(0,S.KO)(h._),C=((e,t)=>{const n=(0,d.Z)("current-patients-alert-end-treamtment-sure");return e=>{(0,c.Z)("warning",n,!0,(()=>(0,u.S)("POST","".concat("/api/DoctorWorkList/EndOfTreatment"),!0,{idAppWorkList:null===e||void 0===e?void 0:e.Id}).then((e=>{1===e.data.resCode?(0,c.Z)("success",e.data.resMessage,!1):(0,c.Z)("warning",e.data.resMessage,!1),t((e=>!e))}))))}})(0,t),x=JSON.parse(localStorage.getItem("icons")),Z="data:image/svg+xml;base64,";return[{...n?{}:{title:(0,d.Z)("general-public-add-new-confer",r),image:Z+(null===x||void 0===x?void 0:x.GeneralIcon["MedicalServiceRegister.svg"]),path:o>1024?"/main/AddNewConfer":"/AddNewConfer",func:sessionStorage.removeItem("savedServices"),disabled:(0,v.Z)(s.toLowerCase()==="/CurrentPatients".toLowerCase()?"current-patient-action-set-confer":"patient-list-action-set-confer")}},{title:(0,d.Z)("current-patients-patient-actions-list-service-confer",r),image:Z+(null===x||void 0===x?void 0:x.GeneralIcon["ViewServices.svg"]),path:o>1024?"/main/ListServiceConfer":"/ListServiceConfer",disabled:(0,v.Z)(s.toLowerCase()==="/CurrentPatients".toLowerCase()?"current-patient-action-list-service-confer":"patient-list-action-list-service-confer")},{...n?{}:{title:(0,d.Z)("current-patients-patient-actions-medical-form",r),image:Z+(null===x||void 0===x?void 0:x.GeneralIcon["FileRegistration.svg"]),path:o>1024?"/main/AddNewElectronicForm":"/AddNewElectronicForm",disabled:(0,v.Z)(s.toLowerCase()==="/CurrentPatients".toLowerCase()?"current-patient-action-medical-form":"patient-list-action-medical-form")}},{title:(0,d.Z)("current-patients-patient-actions-service-summary",r),image:Z+(null===x||void 0===x?void 0:x.GeneralIcon["FileRegistration.svg"]),path:o>1024?"/main/ServiceReportSummary":"/ServiceReportSummary",disabled:(0,v.Z)(s.toLowerCase()==="/CurrentPatients".toLowerCase()?"current-patient-action-confer-summurary":"patient-list-action-confer-summurary")},{...n?{}:{title:(0,d.Z)("current-patients-patient-actions-end-treatment",r),image:Z+(null===x||void 0===x?void 0:x.GeneralIcon["EndOfActivity.svg"]),func:C,disabled:(0,v.Z)(s.toLowerCase()==="/CurrentPatients".toLowerCase()?"current-patient-action-end-treatment":"patient-list-action-end-treatment")}},{...n?{}:{title:(0,d.Z)("current-patients-patient-actions-cancel-referral",r),image:Z+(null===x||void 0===x?void 0:x.GeneralIcon["CanceledReferral.svg"]),func:l,disabled:(0,v.Z)(s.toLowerCase()==="/CurrentPatients".toLowerCase()?"current-patient-action-cancel-referral":"patient-list-action-cancel-redirect")}},{title:(0,d.Z)("general-public-refer-to",r),image:Z+(null===x||void 0===x?void 0:x.GeneralIcon["ReferTo.svg"]),path:o>1024?"/main/ReferTo":"/ReferTo",disabled:(0,v.Z)(s.toLowerCase()==="/CurrentPatients".toLowerCase()?"current-patient-action-refer-to":"patient-list-action-refer-to")}]};var C=n(39230),x=n(73736);const Z=e=>{let{Patient:t,setForceRender:n,disableActions:i}=e;const{t:r,i18n:c}=(0,C.$G)(),u=f(0,n,i),v=(0,a.useContext)(g.k),m="data:image/svg+xml;base64,",p=JSON.parse(localStorage.getItem("icons")),I="".concat((0,d.Z)("general-public-address"),": ").concat((0,x.J)(t.PatientAddress)),S="".concat((0,d.Z)("general-public-mobile-number"),":\xa0").concat(t.PatientMobile);return(0,s.jsxs)(a.Fragment,{children:[(0,s.jsx)(l,{setForceRender:n,ImageSource:m+(null===p||void 0===p?void 0:p.GeneralIcon["Address.svg"]),paragraph:I,i18n:c}),(0,s.jsx)(l,{setForceRender:n,ImageSource:m+(null===p||void 0===p?void 0:p.GeneralIcon["Mobile.svg"]),paragraph:S,i18n:c}),(0,s.jsx)(o.Z,{children:(0,s.jsx)("hr",{})}),null===u||void 0===u?void 0:u.map((e=>!(null!==e&&void 0!==e&&e.disabled)&&(0,s.jsx)(l,{ImageSource:null===e||void 0===e?void 0:e.image,paragraph:null===e||void 0===e?void 0:e.title,clickable:!0,navigate:v.navigate,path:e.path,Patient:t,func:null===e||void 0===e?void 0:e.func,setForceRender:n,i18n:c},v.uuidV4())))]})};var b=n(96015),j=n(13811);const w=(e,t)=>{let n=JSON.parse(sessionStorage.getItem("userFile"))||[];if(-1===n.indexOf(t.Id))n.push(t.Id),sessionStorage.setItem("userFile",JSON.stringify(n)),e(JSON.parse(sessionStorage.getItem("userFile")));else{let a=n.indexOf(t.Id);n.splice(a,1),sessionStorage.setItem("userFile",JSON.stringify(n)),e(JSON.parse(sessionStorage.getItem("userFile")))}},P=e=>{var t;const[n,i]=(0,a.useState)(JSON.parse(sessionStorage.getItem("userFile"))||[]),[o,r]=(0,a.useState)(JSON.parse(sessionStorage.getItem("quickActions"))||[]),s=(e=>{var t;const n=null===(t=(0,a.useContext)(g.k))||void 0===t?void 0:t.LanguageArray,i=JSON.parse(localStorage.getItem("icons")),o="data:image/svg+xml;base64,";return[{title:"".concat((0,d.Z)("general-public-insurance-type",n),": ").concat((0,x.J)(e.InsuranceName)),image:o+(null===i||void 0===i?void 0:i.GeneralIcon["Insurance.svg"])},{title:"".concat((0,d.Z)("general-public-label-patient",n),": ").concat((0,x.J)(e.NamePatient),"\xa0").concat((0,x.J)(e.FamilyPatient),"\xa0").concat(e.AgePatient,"\xa0\u0633\u0627\u0644"),image:o+(null===i||void 0===i?void 0:i.GeneralIcon["PatientName.svg"])}]})(e),l=(0,a.useContext)(g.k),{i18n:c}=(0,C.$G)();return[n,i,s,l,null===(t=(0,a.useContext)(g.k))||void 0===t?void 0:t.LanguageArray,JSON.parse(localStorage.getItem("icons")),"data:image/svg+xml;base64,","".concat((0,d.Z)("general-public-label-presence-time"),":\xa0").concat(e.DateHozoor,"\xa0\xa0").concat(e.TimeHozoor),c,o,r]};var y=n(17205),F=n(48701),k=n(70370),O=n(33957);var N=n(30433);const A=e=>{let{Patient:t,setForceRender:n}=e;const i=(0,d.Z)("general-public-btn-save"),o=(0,d.Z)("general-public-label-presence-time"),l=(0,d.Z)("general-public-label-presence-date"),[g,v]=(0,a.useState)({timeHoozoor:(0,O.p)(null===t||void 0===t?void 0:t.TimeHozoor),dateHoozoor:""}),m=((e,t,n,a)=>{const i=(0,d.Z)("current-patients-label-change-presence");return n=>{(0,c.Z)("warning",i,!0,(()=>(0,u.S)("POST","".concat("/api/DoctorWorkList/SetDateAndTimeHozzor"),!0,{dateHozoor:e,timeHozoor:t,idAppWorkList:null===n||void 0===n?void 0:n.Id}).then((e=>{1===e.data.resCode?(0,c.Z)("success",e.data.resMessage,!1):(0,c.Z)("warning",e.data.resMessage,!1)})).then((()=>{a((e=>!e))}))))}})(g.dateHoozoor,g.timeHoozoor,0,n);return(0,s.jsx)(a.Fragment,{children:(0,s.jsxs)(r.Z,{gap:".5em",children:[(0,s.jsxs)(r.Z,{direction:"row",gap:".5em",justifyContent:"space-between",children:[(0,s.jsx)(F.Z,{initalValue:null===t||void 0===t?void 0:t.TimeHozoor,OutputInMinutes:!0,label:o,onChange:e=>{v((t=>({...t,timeHoozoor:e})))},fullWidth:!0}),(0,s.jsx)(k.Z,{disableInit:!0,initialValue:null===t||void 0===t?void 0:t.DateHozoor,Placeholder:l,onChange:e=>{v((t=>({...t,dateHoozoor:e})))},disableToday:!1,fullWidth:!0})]}),(0,s.jsx)("br",{}),(0,s.jsx)(y.Z,{variant:"contained",onClick:()=>{m(t)},sx:{mb:"1em",mt:"-.6em",color:"".concat(N.l.ColorPrimary," !important")},children:i})]})})};var L=n(91888),J=n(94225),T=n(87810),R=n(61134),D=n(9396);const _=e=>{let{Patient:t,setForceRender:n,detections:i}=e;(0,I.Z)();const o=(0,d.Z)("general-public-label-diagnose"),l=(0,d.Z)("general-public-btn-save"),g=(0,a.useMemo)((()=>i),[JSON.stringify(i)]),v=null===g||void 0===g?void 0:g.map((e=>({ItemContent:(0,x.J)(null===e||void 0===e?void 0:e.Name),ItemValue:null===e||void 0===e?void 0:e.Id})));console.log("detectionDataArray->",v);const{control:m,formState:p,handleSubmit:S}=(0,R.cI)({defaultValues:{idAppWorkList:null===t||void 0===t?void 0:t.Id,idTashkhis:""}}),h=(e=>{const t=(0,d.Z)("current-patients-label-change-detection");return n=>{(0,c.Z)("warning",t,!0,(()=>(0,u.S)("POST","".concat("/api/DoctorWorkList/EditTashkhisErja"),!0,{...n}).then((e=>{console.log("response->",{response:e,data:n}),1===e.data.resCode?(0,c.Z)("success",e.data.resMessage,!1):(0,c.Z)("warning",e.data.resMessage,!1)})).then((()=>{e((e=>!e))}))))}})(n);return(0,s.jsx)(a.Fragment,{children:(0,s.jsx)("form",{onSubmit:S((e=>{h(e)})),onWheel:e=>{e.stopPropagation()},onTouchMove:e=>{e.stopPropagation()},children:(0,s.jsxs)(r.Z,{gap:".5em",children:[v?(0,s.jsx)(T.Z,{element:(0,s.jsx)(J.Z,{initialData:[{ItemContent:(0,x.J)(null===t||void 0===t?void 0:t.NameDiagnosis),ItemValue:(0,x.J)(null===t||void 0===t?void 0:t.NameDiagnosis)}],isSingle:!0,SelectableDataArray:v,label:o,enableInitialOnchange:!0}),control:m,errors:p.errors,name:"idTashkhis",required:!0}):(0,s.jsx)(L.Z,{}),(0,s.jsx)(D.Z,{label:l})]})})})},M=(e,t,n)=>{let a=JSON.parse(sessionStorage.getItem("quickActions"))||[];if(a.some((t=>t.patientId===e))){let t=a.findIndex((t=>t.patientId===e));a.splice(t,1),sessionStorage.setItem("quickActions",JSON.stringify(a)),n(JSON.parse(sessionStorage.getItem("quickActions")))}else a.push({patientId:e,actionType:t}),sessionStorage.setItem("quickActions",JSON.stringify(a)),n(JSON.parse(sessionStorage.getItem("quickActions")))};n(84074);var z=n(68125),G=n(89841);const E=e=>{let{Patient:t,setForceRender:n,bgColor:o,detections:r,disableActions:c}=e;const u=(0,d.Z)("general-public-label-diagnose"),[g,v,m,p,I,S,h,f,C,y,F]=P(t),k=[null===t||void 0===t?void 0:t.TedadMorajee,null===t||void 0===t?void 0:t.TedadForm],O=null!==k&&void 0!==k&&k.every((e=>e>0))?"lightgreen":(null===t||void 0===t?void 0:t.TedadMorajee)>0?"skyblue":(null===t||void 0===t?void 0:t.TedadForm)>0?"lightpink":(null===k||void 0===k?void 0:k.every((e=>0===e)))&&null,L=(0,a.useMemo)((()=>y.some((e=>e.patientId===t.Id&&1===e.actionType))),[JSON.stringify(y)]),J=(0,a.useMemo)((()=>y.some((e=>e.patientId===t.Id&&0===e.actionType))),[JSON.stringify(y)]);return(0,s.jsxs)("div",{className:i.Z.CardContent,style:{backgroundColor:o||O||"",color:"".concat(N.l.ColorPrimary)},children:[(0,s.jsx)(b.Z,{sx:{all:"inherit",p:0},children:null===m||void 0===m?void 0:m.map((e=>(0,s.jsx)(l,{ImageSource:null===e||void 0===e?void 0:e.image,paragraph:null===e||void 0===e?void 0:e.title,setForceRender:n,i18n:C},p.uuidV4())))}),(0,s.jsx)(l,{ImageSource:h+(null===S||void 0===S?void 0:S.GeneralIcon["Detection.svg"]),paragraph:"".concat(u,":\xa0").concat((0,x.J)(t.NameDiagnosis)),setForceRender:n,i18n:C,clickable:!(null!==t&&void 0!==t&&t.CancelByDoctor||null!==t&&void 0!==t&&t.EndOfTreatment),Patient:t,func:()=>{null!==t&&void 0!==t&&t.CancelByDoctor||null!==t&&void 0!==t&&t.EndOfTreatment||M(t.Id,1,F)}}),L&&!g.includes(t.Id)?(0,s.jsx)(_,{Patient:t,setForceRender:n,detections:r}):(0,s.jsx)(s.Fragment,{}),(0,s.jsx)(l,{ImageSource:h+(null===S||void 0===S?void 0:S.GeneralIcon["AttendenceTime.svg"]),paragraph:f,setForceRender:n,i18n:C,clickable:!(null!==t&&void 0!==t&&t.CancelByDoctor||null!==t&&void 0!==t&&t.EndOfTreatment),Patient:t,func:()=>{null!==t&&void 0!==t&&t.CancelByDoctor||null!==t&&void 0!==t&&t.EndOfTreatment||M(t.Id,0,F)}}),""!==(null===t||void 0===t?void 0:t.DescErja)?(0,s.jsxs)("h4",{style:{color:"red",paddingInline:".3em",borderRadius:"3px"},children:[(0,d.Z)("general-public-description",I)," ",":\xa0",(0,x.J)(null===t||void 0===t?void 0:t.DescErja)]}):(0,s.jsx)(s.Fragment,{}),g.includes(t.Id)||J||L?(0,s.jsx)(s.Fragment,{}):(0,s.jsx)(j.Z,{onClick:()=>{w(v,t)},sx:{alignSelf:"center"},children:(0,s.jsx)(z.Z,{color:"colorPrimer"})}),g.includes(t.Id)?(0,s.jsx)(Z,{Patient:t,setForceRender:n,disableActions:c}):(0,s.jsx)(s.Fragment,{}),g.includes(t.Id)?(0,s.jsx)(j.Z,{onClick:()=>{w(v,t)},sx:{alignSelf:"center"},children:(0,s.jsx)(G.Z,{color:"colorPrimer"})}):(0,s.jsx)(s.Fragment,{}),J&&!g.includes(t.Id)?(0,s.jsx)(A,{Patient:t,setForceRender:n}):(0,s.jsx)(s.Fragment,{})]})}},89841:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(81245),i=n(80184);const o=(0,a.Z)([(0,i.jsx)("path",{d:"M6 17.59 7.41 19 12 14.42 16.59 19 18 17.59l-6-6z"},"0"),(0,i.jsx)("path",{d:"m6 11 1.41 1.41L12 7.83l4.59 4.58L18 11l-6-6z"},"1")],"KeyboardDoubleArrowUp")},82873:(e,t,n)=>{n.d(t,{Z:()=>a});const a={frameGradient:"Current_Patient_frameGradient__Ooci-",PatientCard:"Current_Patient_PatientCard__APRY0",CardContent:"Current_Patient_CardContent__co08h",patientContainer:"Current_Patient_patientContainer__9YSIU"}}}]);
//# sourceMappingURL=956.2191d411.chunk.js.map