"use strict";(self.webpackChunknew_ui=self.webpackChunknew_ui||[]).push([[889],{84889:(e,l,i)=>{i.r(l),i.d(l,{default:()=>Q});var o=i(20803),t=i(94162),d=i(72791),n=i(48928);const r="Form_Info_Card__TYvKz";var a=i(38820),s=i(80184);const u=e=>{let{fetchedFrom:l}=e;return(0,s.jsx)(d.Fragment,{children:(0,s.jsxs)(t.Z,{direction:"row",justifyContent:"space-between",sx:{paddingX:"1em"},children:[(0,s.jsx)("p",{children:null===l||void 0===l?void 0:l.EditDate}),(0,s.jsx)("span",{style:{textAlign:"center"},children:(0,s.jsx)(a.Z,{})}),(0,s.jsx)("p",{style:{marginRight:"2.5em"},children:null===l||void 0===l?void 0:l.EditTime})]})})};var v=i(91397),c=i(30433);const m=e=>{let{fetchedFrom:l}=e;const i=(0,v.Z)("general-public-label-confirmed"),o=(0,v.Z)("general-public-label-un-confirmed");return(0,s.jsx)(d.Fragment,{children:(0,s.jsx)(n.Z,{sx:{p:".3em",border:"1px solid ".concat(c.l.ColorPrimary)},className:r,children:(0,s.jsxs)(t.Z,{bgcolor:"white",children:[(0,s.jsxs)(t.Z,{direction:"row",justifyContent:"space-between",sx:{p:"1em"},children:[(0,s.jsxs)(t.Z,{spacing:.5,children:[(0,s.jsx)("p",{children:null===l||void 0===l?void 0:l.Name}),(0,s.jsx)("p",{children:null===l||void 0===l?void 0:l.Date})]}),(0,s.jsxs)(t.Z,{spacing:.5,children:[(0,s.jsx)("p",{style:{color:null!==l&&void 0!==l&&l.Conferm?"green":"red"},children:null!==l&&void 0!==l&&l.Conferm?i:o}),(0,s.jsx)("p",{children:null===l||void 0===l?void 0:l.Time})]})]}),(null===l||void 0===l?void 0:l.EditTime.length)>0&&(null===l||void 0===l?void 0:l.EditDate.length)>0?(0,s.jsx)(u,{fetchedFrom:l}):(0,s.jsx)(s.Fragment,{})]})})})};var h=i(79917),j=(i(88329),i(86775));i(36009);const f=async(e,l)=>{const i=JSON.parse(sessionStorage.getItem("patient"));return(0,j.S)("POST","".concat("/api/ElsFormPatient/ElsFormsPatientAddOrEdit"),!0,{idElsFormPatient:null===l||void 0===l?void 0:l.idElsFormPatient,formID:null===l||void 0===l?void 0:l.formId,patientFormID:1,idPatient:i.IdPatient,idType:27,idConfer:i.Id,AlloEdit:!0,idCartablPatient:0,idPerson:i.IdPerson}).then((i=>{var o,t,d;1===i.data.resCode?(e((e=>{var o,t,d,n,r,a,s,u,v,c,m;return{...e,[null===l||void 0===l?void 0:l.ObjName1]:null===i||void 0===i||null===(o=i.data)||void 0===o||null===(t=o.Data)||void 0===t||null===(d=t.Form)||void 0===d?void 0:d.GroupList,[null===l||void 0===l?void 0:l.ObjName2]:null===i||void 0===i||null===(n=i.data)||void 0===n||null===(r=n.Data)||void 0===r?void 0:r.ListDetail,[null===l||void 0===l?void 0:l.ObjName3]:null===i||void 0===i||null===(a=i.data)||void 0===a||null===(s=a.Data)||void 0===s?void 0:s.IdForm,[null===l||void 0===l?void 0:l.ObjName4]:null===i||void 0===i||null===(u=i.data)||void 0===u||null===(v=u.Data)||void 0===v?void 0:v.IdCartbalePatient,[null===l||void 0===l?void 0:l.ObjName5]:null===i||void 0===i||null===(c=i.data)||void 0===c||null===(m=c.Data)||void 0===m?void 0:m.Form.Id}})),l.setTitle(null===i||void 0===i||null===(o=i.data)||void 0===o||null===(t=o.Data)||void 0===t||null===(d=t.Form)||void 0===d?void 0:d.Name)):(0,h.Z)("error",i.data.resMessage,!1)}))};var x=i(48313);const g=(e,l)=>{const i=d.useRef(!0);d.useMemo((()=>{var l,o;i.current||e([{functions:f,parameters:{idElsFormPatient:null===(l=fetchedFrom)||void 0===l?void 0:l.IdReport,formId:null===(o=fetchedFrom)||void 0===o?void 0:o.IdElsForms,ObjName1:"FormView",ObjName2:"GroupElements",ObjName3:"formId",ObjName4:"IdCartablePatient",ObjName5:"GroupFormId",setTitle:setTitle}}]);i.current=!1}),[l])},p=e=>{const[l,i]=d.useState([]),[o,t]=d.useState(!1),[n,r]=d.useState(!1),[a,s]=d.useState(""),[u,v]=d.useState([{functions:f,parameters:{idElsFormPatient:null===e||void 0===e?void 0:e.IdReport,formId:null===e||void 0===e?void 0:e.IdElsForms,ObjName1:"FormView",ObjName2:"GroupElements",ObjName3:"formId",ObjName4:"IdCartablePatient",ObjName5:"GroupFormId",setTitle:s}}]);g(v,o);const{gatheredData:c}=(0,x.Z)(u);return d.useMemo((()=>{i((e=>({...e,...c,setStateRecoil:t,title:a})))}),[JSON.stringify(c)]),l},F=e=>{const l=(e=>{var l,i;const o=null===e||void 0===e||null===(l=e.GroupElements)||void 0===l?void 0:l.map((e=>{var l,i,o,t,d,n,r,a,s,u,v;return"ComboBox"===(null===e||void 0===e||null===(l=e.ElsFormDetail)||void 0===l||null===(i=l.ElsRecord)||void 0===i?void 0:i.Type)||"RadCheckedDropDownList"===(null===e||void 0===e||null===(o=e.ElsFormDetail)||void 0===o||null===(t=o.ElsRecord)||void 0===t?void 0:t.Type)?{base64:"",idcommand:null===e||void 0===e?void 0:e.IdCommand,iddetail:null===e||void 0===e||null===(d=e.ElsFormDetail)||void 0===d?void 0:d.Id,element:null===e||void 0===e?void 0:e.ElsFormDetail,UiValue:e,value:null===e||void 0===e?void 0:e.Value,name:null===e||void 0===e||null===(n=e.ElsFormDetail)||void 0===n?void 0:n.ElsRecord.Name,isEdit:e.Value.length>0}:{base64:null!==(r=null===e||void 0===e?void 0:e.ImageBase64)&&void 0!==r?r:"",iddetail:null===e||void 0===e||null===(a=e.ElsFormDetail)||void 0===a?void 0:a.Id,element:null===e||void 0===e?void 0:e.ElsFormDetail,UiValue:e,value:null===e||void 0===e?void 0:e.Value,name:null===e||void 0===e||null===(s=e.ElsFormDetail)||void 0===s?void 0:s.ElsRecord.Name,isEdit:0!==Number(null===e||void 0===e?void 0:e.Value)&&e.Value.toString().length>0,..."RadioButton"===(null===e||void 0===e||null===(u=e.ElsFormDetail)||void 0===u||null===(v=u.ElsRecord)||void 0===v?void 0:v.Type)&&{PannelNo:e.ElsFormDetail.RadionPanelNo}}}));return null!==(i=null===o||void 0===o?void 0:o.sort(((e,l)=>e.iddetail-l.iddetail)))&&void 0!==i?i:[]})(e),[i,o]=d.useState([]);return d.useEffect((()=>{e&&o(l)}),[e]),i};var I=i(66637),E=i(91888);const b=(0,d.createContext)(),N=e=>{let{children:l,watch:i}=e;const o=i();return(0,s.jsx)(b.Provider,{value:o,children:l})};var Z=i(16027),D=i(8771),S=i(73736),V=i(81096),w=i(17205),y=i(93413),C=i(86246),P=(i(30178),i(46843));const O=e=>{let{StateBank:l,getValues:i,reset:o,fieldArrayName:n,fetchedFrom:r}=e;const a=(0,d.useContext)(V.k),u=(0,v.Z)("edit-medical-font-alert-save-sure");return(0,s.jsx)(d.Fragment,{children:(0,s.jsx)(t.Z,{direction:"row-reverse",spacing:1,children:(0,s.jsx)(w.Z,{sx:{color:"".concat(c.l.ColorPrimary," !important")},disabled:(0,P.Z)("edit-medical-form-action-edit-form"),color:"colorPrimer",variant:"contained",fullWidth:!0,onClick:()=>{const e=i();(0,h.Z)("warning",u,!0,(()=>{(0,C.c)((0,y.U)(null===e||void 0===e?void 0:e.MedicalDefaultValues),{idElsFormPatient:null===r||void 0===r?void 0:r.IdReport,formID:l.formId,idCartablPatient:l.IdCartablePatient,navigate:a.navigate},o,n,l)}))},children:(0,v.Z)("genral-public-edit-medical-form")})})})};var k=i(97172),A=i(49367),R=i(87866),T=i(26371);const G=e=>{let{GroupId:l,fields:i,control:o,errors:n,setValue:r}=e;const a=null===i||void 0===i?void 0:i.filter((e=>{var i;return(null===e||void 0===e||null===(i=e.element)||void 0===i?void 0:i.IdGroupDetail)===l}));(0,A.Z)(i);const[u]=(0,R.Z)(a),v=(0,T.K)(u);return(0,s.jsx)(d.Fragment,{children:(0,s.jsx)(t.Z,{spacing:1,children:(0,s.jsx)(Z.Z,{element:null===v||void 0===v?void 0:v.map(((e,l)=>(null===v||void 0===v?void 0:v.length)>0?(0,s.jsx)(k.Z,{element:e,field:e,control:o,errors:n,setValue:r},l):(0,s.jsx)(s.Fragment,{}))),dependecies:[JSON.stringify(v)]})})})};var B=i(37355),_=i(27603),J=i(43671),M=i(4565),L=i(91267);const U={rootAccordion:"Accodion_rootAccordion__qAq9X"};var q=i(40318);const K=e=>{var l;const i=(0,d.useContext)(b),o=null===i||void 0===i||null===(l=i.MedicalDefaultValues)||void 0===l?void 0:l.map((e=>({...e,value:0===Number(e.value)?"":e.value}))),t=null===o||void 0===o?void 0:o.filter((l=>{var i,o,t;return(null===l||void 0===l||null===(i=l.value)||void 0===i||null===(o=i.toString())||void 0===o?void 0:o.length)>0&&(null===l||void 0===l||null===(t=l.element)||void 0===t?void 0:t.IdGroupDetail)===e}));return null===t||void 0===t?void 0:t.map((e=>{var l,i,o;return(null===e||void 0===e||null===(l=e.UiValue)||void 0===l||null===(i=l.Value)||void 0===i?void 0:i.toString())!==(null===e||void 0===e||null===(o=e.value)||void 0===o?void 0:o.toString())?{...e,isEdit:!1}:{...e}}))},X=e=>{let{titleId:l}=e;const i=K(l);return(null===i||void 0===i?void 0:i.length)>0&&i[0].isEdit?(0,s.jsx)("span",{style:{color:"#2196f3",marginLeft:"1em"},children:(0,s.jsx)(a.Z,{})}):(null===i||void 0===i?void 0:i.length)>0&&!i[0].isEdit?(0,s.jsx)("span",{style:{color:"#2196f3",marginLeft:"1em"},children:(0,s.jsx)(q.Z,{})}):(0,s.jsx)(s.Fragment,{})},z=e=>{let{FormElement:l,title:i,titleId:o}=e;return(0,s.jsx)(d.Fragment,{children:(0,s.jsxs)(_.Z,{classes:{root:U.rootAccordion},square:!0,children:[(0,s.jsx)(J.Z,{expandIcon:(0,s.jsx)(B.Z,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:(0,s.jsxs)(t.Z,{alignItems:"center",direction:"row",spacing:1,children:[(0,s.jsx)(X,{titleId:o}),(0,s.jsx)(M.Z,{children:i.replace(/\u064a/g,"\u06cc")})]})}),(0,s.jsx)(L.Z,{className:U.accordionDetails,children:l})]})})},W=e=>{var l,i,o;let{StateBank:n,control:r,errors:a,fields:u,getValues:c,reset:m,fieldArrayName:h,fetchedFrom:j,setValue:f}=e;const x=(0,d.useContext)(V.k);return(0,s.jsx)(d.Fragment,{children:(0,s.jsx)(Z.Z,{element:(null===n||void 0===n?void 0:n.formId)===(null===n||void 0===n?void 0:n.GroupFormId)?(null===n||void 0===n||null===(l=n.title)||void 0===l?void 0:l.length)>0?(0,s.jsxs)(t.Z,{spacing:".5em",width:"100%",children:[0===(null===n||void 0===n||null===(i=n.FormView)||void 0===i?void 0:i.length)?(0,s.jsx)(D.Z,{dir:"rtl",severity:"warning",children:(0,v.Z)("general-public-warning-please-wait")}):null===n||void 0===n||null===(o=n.FormView)||void 0===o?void 0:o.map((e=>(0,s.jsx)(z,{titleId:e.Id,FormElement:(0,s.jsx)(G,{GroupId:e.Id,fields:u,control:r,errors:a,reset:m,fieldArrayName:h,setValue:f}),title:(0,S.J)(null===e||void 0===e?void 0:e.NameGroup)},x.uuidV4()))),(0,s.jsx)(O,{StateBank:n,getValues:c,reset:m,fieldArrayName:h,fetchedFrom:j})]}):(0,s.jsx)(s.Fragment,{}):(0,s.jsx)(E.Z,{}),dependecies:[JSON.stringify(n),JSON.stringify(u)]})})},Y=e=>{var l;let{StateBank:i,fieldArrayName:o,DefaultValues:t,fetchedFrom:n}=e;const{fields:r,control:a,formState:u,getValues:v,reset:c,watch:m,setValue:h}=(0,I.Z)("".concat(o),t);return(0,s.jsx)(N,{watch:m,children:(0,s.jsx)(d.Fragment,{children:(null===i||void 0===i||null===(l=i.title)||void 0===l?void 0:l.length)>0?(0,s.jsx)(W,{StateBank:i,control:a,errors:null===u||void 0===u?void 0:u.errors,fields:r,getValues:v,reset:c,fieldArrayName:o,fetchedFrom:n,setValue:h}):(0,s.jsx)(E.Z,{})})})},H=e=>{let{StateBank:l,fetchedFrom:i}=e;const o=F(l);return(0,s.jsx)(d.Fragment,{children:(0,s.jsx)(Y,{StateBank:l,fieldArrayName:"MedicalDefaultValues",DefaultValues:o,isEdit:!0,fetchedFrom:i})})},Q=()=>{const e=JSON.parse(window.sessionStorage.getItem("EditableForm")),l=p(e);return(0,s.jsx)(d.Fragment,{children:(0,s.jsx)(o.Z,{children:(0,s.jsxs)(t.Z,{sx:{mt:"1em"},spacing:1,children:[(0,s.jsx)(m,{fetchedFrom:e}),(0,s.jsx)(H,{StateBank:l,fetchedFrom:e})]})})})}}}]);
//# sourceMappingURL=889.a189e708.chunk.js.map