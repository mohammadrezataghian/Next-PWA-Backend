"use strict";(self.webpackChunknew_ui=self.webpackChunknew_ui||[]).push([[154],{99755:(e,a,t)=>{t.d(a,{Z:()=>i});var r=t(72791),n=t(94162),l=t(75017),s=t(80184);const i=e=>{let{label:a,value:t,onChange:i,isEnglish:o=!1}=e;return r.useEffect((()=>{i&&i(t)}),[t]),(0,s.jsx)(r.Fragment,{children:(0,s.jsxs)(n.Z,{alignItems:"flex-end",width:"100%",children:[(0,s.jsx)("sub",{style:{width:"100%",textAlign:o?"left":"right"},dir:o?"ltr":"rtl",children:a}),(0,s.jsx)(l.Z,{fullWidth:!0,color:"colorPrimer",disabled:!0,value:""===t?"\u062f\u0627\u062f\u0647 \u0627\u06cc \u062b\u0628\u062a \u0646\u0634\u062f\u0647":null!==t&&void 0!==t?t:"",size:"small"})]})})}},41333:(e,a,t)=>{t.d(a,{Z:()=>m});var r=t(94162),n=t(72791),l=t(58828),s=t(71937),i=t(21044),o=t(7802),d=t(39230),c=t(91397),u=t(80184);const m=e=>{let{label:a,onChange:t,errors:m,name:g}=e;const[v,h]=n.useState({Date:(0,l.d)(),Time:(0,s.c)()});n.useEffect((()=>{Object.values(v).length&&t&&t(v)}),[v]);const{t:f,i18n:x}=(0,d.$G)();return(0,u.jsx)(n.Fragment,{children:(0,u.jsxs)(r.Z,{direction:"row",spacing:1,alignItems:"center",children:[(0,u.jsx)(i.Z,{i18n:x,label:(0,c.Z)("general-public-history"),getter:h}),(0,u.jsx)(o.Z,{label:(0,c.Z)("general-public-label-time"),getter:h})]})})}},90154:(e,a,t)=>{t.r(a),t.d(a,{default:()=>_});var r=t(20803),n=t(91888),l=t(72791),s=t(94162),i=t(99755),o=t(91397),d=t(30178),c=t(73736),u=t(80184);const m=e=>{var a;let{gatheredData:t,languageArray:r}=e;return(0,u.jsx)(l.Fragment,{children:(0,u.jsxs)(s.Z,{spacing:1,children:[(0,u.jsx)(i.Z,{value:(0,c.J)(null===t||void 0===t?void 0:t.FirstName)}),(0,u.jsx)(i.Z,{value:(0,c.J)(null===t||void 0===t?void 0:t.LastName)}),(0,u.jsx)(i.Z,{value:(null===t||void 0===t||null===(a=t.NationalCode)||void 0===a?void 0:a.length)>0?null===t||void 0===t?void 0:t.NationalCode:(0,o.Z)("general-public-label-no-national-code-hint",r)})]})})},g=e=>{let{gatheredData:a,languageArray:t}=e;return(0,u.jsx)(l.Fragment,{children:(0,u.jsx)(s.Z,{sx:{mt:"1em"},children:(0,u.jsx)(m,{gatheredData:null===a||void 0===a?void 0:a.PatientReadOnlyData,languageArray:t})})})};var v=t(61134),h=t(58828),f=t(71937);const x={bySpecialDay:!1,date:(0,h.d)(),faseleRoozha:1,specialDayList:0,tedadJalase:"",time:(0,f.c)()};var j=t(9396),p=t(87810),D=t(27965),y=(t(87058),t(92186)),Z=t(41333),S=t(3504);const b=e=>{let{formState:a,control:t,stateBank:r}=e;const[n,i]=(0,l.useState)({fasele:!1,day:!1}),c=[(0,o.Z)("refer-to-numeric-session-count"),(0,o.Z)("refer-to-numeric-days-gap"),(0,o.Z)("general-public-history"),(0,o.Z)("general-public-label-presence-time"),(0,o.Z)("refer-to-check-special-days"),(0,o.Z)("refer-to-select-days-of-week")];return(0,u.jsxs)(l.Fragment,{children:[(0,u.jsxs)(s.Z,{gap:".5em",direction:"row-reverse",children:[(0,u.jsx)(p.Z,{element:(0,u.jsx)(D.Z,{label:c[0],isEnglish:"en"===d.ZP.language}),control:t,errors:a.errors,name:"tedadJalase",required:!0}),(0,u.jsx)(p.Z,{element:(0,u.jsx)(S.Z,{value:null!==n&&void 0!==n&&n.day?0:"",disabled:null===n||void 0===n?void 0:n.day,label:c[1],isEnglish:"en"===d.ZP.language,customOnChange:e=>{e.target.value.length>0?i((e=>({...e,fasele:!0,day:!1}))):i((e=>({...e,fasele:!1})))}}),control:t,errors:a.errors,name:"faseleRoozha"})]}),(0,u.jsx)(p.Z,{element:(0,u.jsx)(y.Z,{disabled:null===n||void 0===n?void 0:n.fasele,isSingle:!1,SelectableDataArray:null===r||void 0===r?void 0:r.DaysOfWeek,label:c[5],GetSelectedValue:e=>{var a;(null===e||void 0===e||null===(a=e.ItemContent)||void 0===a?void 0:a.length)>0?i((e=>({...e,fasele:!1,day:!0}))):i((e=>({...e,day:!1})))}}),control:t,errors:a.errors,name:"specialDayList"}),(0,u.jsx)(p.Z,{element:(0,u.jsx)(Z.Z,{}),control:t,errors:a.errors,name:"dateTime"})]})},k=e=>{let{stateBank:a,setReferalData:t,languageArray:r}=e;const{formState:n,control:i,handleSubmit:d,watch:c,reset:m}=(0,v.cI)({defaultValues:{...x}}),g=c();return(0,l.useEffect)((()=>{null!==g&&void 0!==g&&g.specialDayList&&m({...g,faseleRoozha:0})}),[JSON.stringify(g)]),(0,u.jsx)(l.Fragment,{children:(0,u.jsx)("form",{onSubmit:d((e=>{((e,a)=>{a(e)})(e,t)})),children:(0,u.jsxs)(s.Z,{marginTop:".5em",gap:".5em",children:[(0,u.jsx)(b,{formState:n,control:i,stateBank:a}),(0,u.jsx)(j.Z,{label:(0,o.Z)("refer-to-btn-get-date-list",r)})]})})})};var O=t(48313),P=t(79917),w=t(86775);t(36009);const T=async(e,a)=>{const t=JSON.parse(sessionStorage.getItem("patient"));return(0,w.S)("POST","".concat("/api/Doctor/GetPatientById"),!0,{Id:t.IdPatient}).then((t=>{1===t.data.resCode&&e((e=>({...e,[a]:t.data.Data})))}))},I=async(e,a)=>(0,w.d)("".concat("/api/public/GetDayOfWeek"),!0,{}).then((t=>{1===t.data.resCode&&e((e=>({...e,[a]:t.data.Data.map((e=>({ItemValue:e.Id,ItemContent:(0,c.J)(e.Name)})))})))})),N=async(e,a)=>{var t,r,n;const l=null===a||void 0===a?void 0:a.data,{dateTime:s,...i}=l,o={...i,time:null===l||void 0===l||null===(t=l.dateTime)||void 0===t?void 0:t.Time,date:null===l||void 0===l||null===(r=l.dateTime)||void 0===r?void 0:r.Date,bySpecialDay:(null===l||void 0===l||null===(n=l.specialDayList)||void 0===n?void 0:n.length)>0};return(0,w.S)("POST","".concat("/api/Doctor/GetDateAndTimeListForErja"),!0,o).then((t=>{1===t.data.resCode?e((e=>({...e,[null===a||void 0===a?void 0:a.ObjName]:t.data.Data}))):(0,P.Z)("error",t.data.resMessage,!1)}))},F=async(e,a)=>(0,w.S)("POST","".concat("/api/Public/GetTashkhisList"),!0,{idSystem:900,clause:""}).then((t=>{console.log("response->",t),1===t.data.resCode?e((e=>({...e,[a]:t.data.Data.list.map((e=>({id:e.Id,label:(0,c.J)(e.Name)})))}))):(0,P.Z)("error",t.data.resMessage,!1)})),C=e=>{const[a,t]=l.useState(null),[r,n]=l.useState([]);l.useEffect((()=>{n([{functions:T,parameters:"PatientReadOnlyData"},{functions:I,parameters:"DaysOfWeek"}])}),[]),l.useEffect((()=>{e&&n([{functions:N,parameters:{ObjName:"ReferalDates",data:e}},{functions:F,parameters:"DetectionList"}])}),[e]);const{gatheredData:s}=(0,O.Z)(r);return l.useEffect((()=>{t((e=>({...e,...s,setStateBank:t})))}),[s]),a};var L=t(70310);const R=e=>{let{RawGridData:a}=e;const t=null===a||void 0===a?void 0:a.map((e=>{let{time:a,...t}=e;return{dayName:t.dayName,date:t.date,timeStr:t.timeStr}})),{rows:r,columns:n}=(s=t)?{rows:s.map(((e,a)=>({id:a,...e}))),columns:Object.keys(s[0]).map((e=>{let a;switch(e){case"date":a="\u062a\u0627\u0631\u06cc\u062e";break;case"timeStr":a="\u0632\u0645\u0627\u0646";break;case"dayName":a="\u0631\u0648\u0632";break;default:a=e}return{field:e,headerName:a,flex:1,align:"center",headerAlign:"center",height:8}})).reverse()}:{rows:[],columns:[]};var s;return(0,u.jsx)(l.Fragment,{children:(0,u.jsx)("div",{style:{height:260,width:"100%",marginTop:".5em"},children:(0,u.jsx)(L._,{rows:r,columns:n,rowHeight:22})})})},E={dateHozoor:(0,h.d)(),description:"",idDoctor:null,idInsurance:"",idPatient:"",idPerson:"",idTashkhis:null,tarikhList:"",timeHozoor:(0,f.c)()};var J=t(9181),A=t(17205);const z=(e,a,t,r,n,l)=>{var s;const i=JSON.parse(sessionStorage.getItem("patient")),{dateTimeHozoor:o,...d}=e;let c;c={...d,idInsurance:null===i||void 0===i?void 0:i.IdInsurance,idPatient:null===i||void 0===i?void 0:i.IdPatient,idPerson:null===i||void 0===i?void 0:i.IdPerson,idDoctor:null===e||void 0===e?void 0:e.idDoctor[0].id,idTashkhis:null===e||void 0===e?void 0:e.idTashkhis[0].id,tarikhList:null===a||void 0===a||null===(s=a.ReferalDates)||void 0===s?void 0:s.list,dateHozoor:(0,h.d)(),timeHozoor:(0,f.c)()},(0,P.Z)("warning",n,!0,(()=>{l(!0),JSON.stringify(r.current)!==JSON.stringify(c)?((async(e,a,t)=>{(0,w.S)("POST","".concat("/api/Doctor/AddPatientErjaListToWorkList"),!0,{...e}).then((e=>{t(!1),1===e.data.resCode?((0,P.Z)("success",e.data.resMessage,!1),a(-1)):(0,P.Z)("error",e.data.resMessage,!1)}))})(c,t,l),r.current=c):((0,P.Z)("warning","\u0627\u0631\u062c\u0627\u0639 \u0645\u062f \u0646\u0638\u0631 \u062b\u0628\u062a \u0634\u062f\u0647 \u0645\u06cc\u0628\u0627\u0634\u062f",!1),l(!1))}))};var H=t(81096),B=t(19790),G=(t(70654),t(7802),t(44503));const W=e=>{const[a,t]=l.useState(),[r,n]=l.useState(""),[s,i]=l.useState({});return l.useEffect((()=>{a&&a.length>0&&(async(e,a,t)=>{const r=JSON.parse(sessionStorage.getItem("patient"));(0,w.S)("POST","".concat("/api/Doctor/GetDoctorListForErja"),!0,{...t,idMantaghe:(null===r||void 0===r?void 0:r.FldIdMantaghe)||0}).then((t=>{1===t.data.resCode?e((e=>({...e,[a]:t.data.Data.list.map((e=>({id:e.Id,label:(0,c.J)(e.FullName)})))}))):(0,P.Z)("error",t.data.resMessage,!1)}))})(i,"Doctors",{idTashkh:a[0].id,topRecord:5e3,clause:r,dateErja:e.date})}),[a]),{Detection:a,setDetection:t,searchField:r,HandleSearchDoctor:e=>{n(e.target.value)},Doctor:s}};var M=t(30433);const V=e=>{let{stateBank:a,referalData:t,previousReferal:r,languageArray:i}=e;const{control:c,formState:m,handleSubmit:g}=(0,v.cI)({defaultValues:E}),h=((e,a)=>{const[t,r]=l.useState(),{Detection:n,setDetection:s,searchField:i,HandleSearchDoctor:c,Doctor:m}=W(a),g=(0,o.Z)("general-public-label-description"),v=(0,o.Z)("general-public-label-diagnose"),h=(0,o.Z)("general-public-label-doctors-list");return l.useEffect((()=>{var a;r([{element:(0,u.jsx)("div",{style:{display:"none"},children:(0,u.jsx)(Z.Z,{})}),name:"dateTimeHozoor"},{element:(0,u.jsx)(G.Z,{label:g,isEnglish:"en"===d.ZP.language}),name:"description"},{element:(0,u.jsx)(B.Z,{label:v,isEnglish:!1,SelectableDataArray:null===e||void 0===e?void 0:e.DetectionList,stateLift:s,completeOutPut:!0}),name:"idTashkhis",required:!0},{element:(0,u.jsx)(B.Z,{label:h,isEnglish:!1,SelectableDataArray:null!==(a=null===m||void 0===m?void 0:m.Doctors)&&void 0!==a?a:[],completeOutPut:!0}),name:"idDoctor",required:!0}])}),[JSON.stringify(null===e||void 0===e?void 0:e.DetectionList),JSON.stringify(n),i,JSON.stringify(m)]),t})(a,t),f=(0,l.useContext)(H.k).navigate,x=(0,o.Z)("confirm-alert-msg-confrim-add-erja"),p=(0,o.Z)("general-public-btn-save"),D=(0,o.Z)("general-public-btn-save"),[y,S]=(0,l.useState)(!1);return(0,u.jsxs)(l.Fragment,{children:[(0,u.jsx)("form",{onSubmit:g((e=>z(e,a,f,r,x,S))),children:(0,u.jsxs)(s.Z,{marginTop:"0.5em",gap:".5em",children:[(0,u.jsx)(J.Z,{control:c,formState:m,DataArray:h}),y?(0,u.jsx)(n.Z,{}):(0,u.jsxs)(s.Z,{direction:"row-reverse",gap:".5em",children:[(0,u.jsx)(j.Z,{label:D}),(0,u.jsx)(A.Z,{color:"error",variant:"contained",onClick:()=>{const{DetectionList:e,ReferalDates:t,...r}=a;null===a||void 0===a||a.setStateBank(r)},sx:{maxHeight:"40px",color:"".concat(M.l.ColorPrimary," !important")},fullWidth:!0,children:p})]})]})}),(0,u.jsx)("br",{})]})};var q=t(16027);const _=()=>{var e,a;const[t,s]=l.useState(),i=C(t),o=l.useRef({}),d=null===(e=(0,l.useContext)(H.k))||void 0===e?void 0:e.LanguageArray;return(0,u.jsx)(l.Fragment,{children:(0,u.jsx)(r.Z,{maxWidth:"md",children:null!==i&&void 0!==i&&i.PatientReadOnlyData&&null!==i&&void 0!==i&&i.DaysOfWeek?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(g,{gatheredData:i,languageArray:d}),(0,u.jsx)(q.Z,{element:null!==i&&void 0!==i&&i.DetectionList?(0,u.jsx)(u.Fragment,{}):(0,u.jsx)(k,{stateBank:i,setReferalData:s,languageArray:d}),dependecies:[JSON.stringify(i),JSON.stringify(d)]}),null!==i&&void 0!==i&&i.ReferalDates?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(R,{RawGridData:null===i||void 0===i||null===(a=i.ReferalDates)||void 0===a?void 0:a.list}),(0,u.jsx)(V,{stateBank:i,referalData:t,previousReferal:o,languageArray:d})]}):(0,u.jsx)(u.Fragment,{})]}):(0,u.jsx)(n.Z,{color:"colorPrimer",sx:{width:"100%",position:"sticky"}})})})}},71937:(e,a,t)=>{t.d(a,{c:()=>n});var r=t(33957);const n=()=>{var e;return(0,r.p)(null===(e=new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"2-digit",hour12:!1}))||void 0===e?void 0:e.format(new Date))}}}]);
//# sourceMappingURL=154.0ccdf469.chunk.js.map