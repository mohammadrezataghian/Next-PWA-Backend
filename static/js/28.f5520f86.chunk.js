"use strict";(self.webpackChunknew_ui=self.webpackChunknew_ui||[]).push([[28],{99755:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(72791),l=i(94162),a=i(75017),r=i(80184);const s=e=>{let{label:t,value:i,onChange:s,isEnglish:o=!1}=e;return n.useEffect((()=>{s&&s(i)}),[i]),(0,r.jsx)(n.Fragment,{children:(0,r.jsxs)(l.Z,{alignItems:"flex-end",width:"100%",children:[(0,r.jsx)("sub",{style:{width:"100%",textAlign:o?"left":"right"},dir:o?"ltr":"rtl",children:t}),(0,r.jsx)(a.Z,{fullWidth:!0,color:"colorPrimer",disabled:!0,value:""===i?"\u062f\u0627\u062f\u0647 \u0627\u06cc \u062b\u0628\u062a \u0646\u0634\u062f\u0647":null!==i&&void 0!==i?i:"",size:"small"})]})})}},36028:(e,t,i)=>{i.r(t),i.d(t,{default:()=>ne});var n=i(72791),l=i(20803),a=i(84074),r=i(88329);i(36009);var s=i(80184);const o=(0,n.createContext)(),d=e=>{let{children:t}=e;const[i,l]=(0,n.useState)(),d=(e=>{var t,i;const n=null===(t=JSON.parse(r.Z.get("user")||""))||void 0===t?void 0:t.IdPatient;return null===(i=(0,a.Z)("".concat("/api/Freez/FreezContract"),!0,{idPatient:n},e))||void 0===i?void 0:i.Data})(i),c={contracts:null===d||void 0===d?void 0:d.FreezList,watch_contract:l};return(0,s.jsx)(o.Provider,{value:c,children:t})};var c=i(11790),u=i(94162),p=i(91888);const x=e=>{let{firstText:t,secondText:i,direction:l,justify:a,gap:r,padding:o,textAlign:d,fullWidth:c,enableAlignItems:p}=e;return(0,s.jsx)(n.Fragment,{children:(0,s.jsxs)(u.Z,{direction:l||"row",justifyContent:a||"space-between",gap:r||"",padding:o||"",width:c&&"100%",children:[(0,s.jsx)(u.Z,{alignItems:p&&d,width:c&&"100%",children:(0,s.jsx)("p",{style:{textAlign:d||"initial"},children:t})}),(0,s.jsx)(u.Z,{alignItems:p&&d,width:c&&"100%",children:(0,s.jsx)("p",{style:{textAlign:d||"initial"},children:i})})]})})};var m=i(73736),v=i(83737),g=i(91397);const h=e=>{let{details:t,setReceptions:i}=e;const{freezeType:l,startDate:a,stopDate:r,owePrice:o}={freezeType:(0,g.Z)("freeze-contracts-label-freeze-type"),startDate:(0,g.Z)("freeze-contracts-label-contract-start-date"),stopDate:(0,g.Z)("freeze-contracts-label-contract-end-date"),owePrice:(0,g.Z)("freeze-contracts-label-owe-price")};return(0,s.jsx)(n.Fragment,{children:(0,s.jsxs)("div",{style:{all:"inherit",padding:0},onClick:()=>{i([])},children:[(0,s.jsx)(x,{firstText:(0,m.J)(null===t||void 0===t?void 0:t.NoeFreezName),secondText:l}),(0,s.jsx)(x,{firstText:null===t||void 0===t?void 0:t.TarikhShoro,secondText:a}),(0,s.jsx)(x,{firstText:null===t||void 0===t?void 0:t.AkharinTamdid,secondText:r}),(0,s.jsx)(x,{firstText:(0,v.B)(null===t||void 0===t?void 0:t.MablaghBedehkari),secondText:o})]})})};var f=i(17205);const j={fullWidth:!0};var b=i(79917),Z=i(86775);const T=async(e,t)=>{const i=JSON.parse(r.Z.get("user"));t(0),(0,Z.S)("POST","".concat("/api/Freez/FishHayPardakhtiList"),!0,{idPatient:null===i||void 0===i?void 0:i.IdPatient,idType:7,idTestimontial:e}).then((e=>{console.log("res->",e);const i=e.data.Data.ListFileArchive.map((e=>{var t,i;return null!==(t=[".jpg",".png",".tiff",".webp"])&&void 0!==t&&t.includes(null===(i=e.NameFile)||void 0===i?void 0:i.match(/\.[0-9a-z]+$/i)[0])?(e.base64Extention=e.base64Extention="data:image/".concat(e.NameFile.match(/\.[0-9a-z]+$/i)[0].split(".").pop().toLowerCase(),";base64,"),e):e}));1===e.data.resCode?t(i):((0,b.Z)("error",e.data.resMessage,!1),t())}))};var F=i(55112),I=i(48928),C=i(61134),P=i(70370),w=i(73544),y=(i(99755),i(44503),i(30178)),S=i(58828);const z=(e,t)=>{const i="en"===y.ZP.language,n=(0,g.Z)("general-public-label-file-name"),l=(0,g.Z)("general-public-label-file-date"),a=(0,g.Z)("general-public-label-file-description");return[{element:(0,s.jsx)(w.Z,{isEnglish:i,label:n,Initialvalue:(null===e||void 0===e?void 0:e.fileName)||"",disabled:!0}),name:"fileName"},{element:(0,s.jsx)(P.Z,{Placeholder:l,isEnglish:i,disableInit:!0,initialValue:(null===e||void 0===e?void 0:e.fileDate)||(0,S.d)()}),name:"fileDate"},{element:(0,s.jsx)(w.Z,{label:a,Initialvalue:t}),name:"fileDescription"}]};var D=i(9181),k=i(85654);const A=(e,t)=>{const[i,l]=(0,n.useState)(""),[a,r]=(0,n.useState)(t),s=(0,n.useRef)(null);return(0,n.useEffect)((()=>{null!==i&&void 0!==i&&i.fileContent&&e("fileBase64",null===i||void 0===i?void 0:i.fileContent)}),[i]),(0,n.useEffect)((()=>{void 0!==t&&r(t)}),[t]),[l,s,r,i,a]};const R=(0,i(81245).Z)((0,s.jsx)("path",{d:"M6 2c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6H6zm7 7V3.5L18.5 9H13z"}),"InsertDriveFile");var E=i(30433);const N=e=>{let{select:t,fileInputRef:i}=e;return(0,s.jsx)(n.Fragment,{children:(0,s.jsx)(f.Z,{variant:"contained",startIcon:(0,s.jsx)(R,{}),onClick:()=>{i.current.click()},sx:{color:"".concat(E.l.ColorPrimary," !important")},children:t})})},B=e=>{let{DoneText:t,accept:i,setBackdropOpen:l,onClose:a,cancel:r,setBase64:o,reset:d,otherDefaults:c}=e;return(0,s.jsx)(n.Fragment,{children:(0,s.jsxs)(u.Z,{direction:"row",gap:".5em",children:[(0,s.jsx)(f.Z,{fullWidth:!0,variant:"contained",onClick:()=>{l(!1),a(),o()},sx:{color:"".concat(E.l.ColorPrimary," !important")},children:r}),(0,s.jsx)(f.Z,{fullWidth:!0,variant:"contained",type:"submit",color:"colorPrimer",sx:{color:"".concat(E.l.ColorPrimary," !important")},children:t||i})]})})};var L=i(87810);const O=e=>{var t;let{Additionals:i,DoneText:l="",fn:a=(()=>{}),isOpen:r=!1,onClose:o=(()=>{}),otherDefaults:d={},descriptionlabel:c}=e;const{formState:p,control:x,handleSubmit:m,setValue:v,reset:h}=(0,C.cI)({defaultValues:{fileName:"",fileDate:(0,S.d)(),fileDescription:"",fileBase64:"",...d}}),[f,j,Z,T,P]=A(v,r),[w,y,R,E]=(()=>{const e=(0,g.Z)("general-public-btn-save"),t=(0,g.Z)("general-public-btn-cancel"),i=(0,g.Z)("add-new-alert-no-items-selected");return[(0,g.Z)("general-public-select-description"),e,t,i]})();return(0,s.jsx)(n.Fragment,{children:(0,s.jsxs)(F.Z,{open:P,sx:{zIndex:999},children:[(0,s.jsx)(I.Z,{sx:{p:"1em",minWidth:"21em"},children:(0,s.jsx)("form",{onSubmit:m((e=>{0===e.fileBase64.length||0===e.fileName.length?(0,b.Z)("warning",E,!1):a(e)})),children:(0,s.jsxs)(u.Z,{gap:".5em",children:[(0,s.jsx)(N,{select:w,fileInputRef:j}),(0,s.jsx)(D.Z,{control:x,formState:p,DataArray:z(T,c)}),i?null===(t=i(T))||void 0===t?void 0:t.map(((e,t)=>(0,s.jsx)(L.Z,{control:x,element:e.element,required:e.required,errors:p.errors,name:e.name,ispassword:e.isPassword,customProps:T},t))):(0,s.jsx)(s.Fragment,{}),(0,s.jsx)(B,{DoneText:l,accept:y,setBackdropOpen:Z,onClose:o,cancel:R,setBase64:f,reset:h})]})})}),(0,s.jsx)("input",{onChange:e=>(0,k.v)(e,f),type:"file",accept:".jpg, .png, .jpeg, .gif, .bmp, .tif, .tiff, application/pdf, image/*",hidden:!0,ref:j})]})})};var M=i(27965);const W=(e,t,i,n)=>{(async(e,t,i,n)=>{n(!0);const l=JSON.parse(r.Z.get("user"));var a;(0,Z.S)("POST","".concat("/api/Freez/addFishHayParkhati"),!0,{base64Content:null===e||void 0===e?void 0:e.fileBase64,DateMadrak:null===e||void 0===e?void 0:e.fileDate,Description:null===e||void 0===e?void 0:e.fileDescription,Id:0,IdPatient:null===l||void 0===l?void 0:l.IdPatient,idTestimontial:null===e||void 0===e?void 0:e.idTestimontial,IdType:7,ImageOrFile:(a=null===e||void 0===e?void 0:e.fileBase64,!!a.substring(0,a.indexOf(",")).startsWith("data:image")),mablag:null===e||void 0===e?void 0:e.mablagh,NameFile:null===e||void 0===e?void 0:e.fileName,ShomarePaigiri:null===e||void 0===e?void 0:e.ShomarePaigiri.toString()}).then((l=>{1===l.data.resCode?(t(!1),T(null===e||void 0===e?void 0:e.idTestimontial,i),(0,b.Z)("success",l.data.resMessage,!1)):(0,b.Z)("error",l.data.resMessage,!1),n(!1)}))})(e,t,i,n)},H=e=>{let{enableUploader:t,setEnableUploader:i,IdTestimontial:l,setReceptions:a,setEnableLoading:r,enableLoading:o}=e;const d=(0,g.Z)("freeze-contracts-label-charge-contract"),c=(0,g.Z)("freeze-contracts-label-price"),u=(0,g.Z)("general-public-tracking-code");return(0,s.jsx)(n.Fragment,{children:o?(0,s.jsx)(p.Z,{}):(0,s.jsx)(n.Fragment,{children:t?(0,s.jsx)(O,{isOpen:t,onClose:()=>i(!1),descriptionlabel:d,Additionals:e=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return[{element:(0,s.jsx)(M.Z,{label:t,thousandSeparator:!0}),name:"mablagh",required:!0},{element:(0,s.jsx)(M.Z,{label:i}),name:"ShomarePaigiri",required:!0}]}(e,c,u),fn:e=>{W({...e,idTestimontial:l},i,a,r)}}):(0,s.jsx)(s.Fragment,{})})})},V=e=>{let{details:t,setReceptions:i}=e;const{uploadReceipt:l,receiptList:a}={uploadReceipt:(0,g.Z)("freeze-contracts-btn-upload-bank-receipt"),receiptList:(0,g.Z)("freeze-contracts-btn-get-receipt-list")},[r,o]=(0,n.useState)(!1),[d,c]=(0,n.useState)(!1);return(0,s.jsxs)(n.Fragment,{children:[(0,s.jsxs)(u.Z,{gap:".3em",direction:"row",children:[(0,s.jsx)(f.Z,{disabled:d,variant:"contained",...j,onClick:()=>o(!0),sx:{color:"".concat(E.l.ColorPrimary," !important")},children:l}),(0,s.jsx)(f.Z,{disabled:d,variant:"contained",...j,onClick:()=>{((e,t)=>{T(e,t)})(null===t||void 0===t?void 0:t.IdTestimontial,i)},sx:{color:"".concat(E.l.ColorPrimary," !important")},children:a}),(0,s.jsx)(H,{enableUploader:r,setEnableUploader:o,IdTestimontial:null===t||void 0===t?void 0:t.IdTestimontial,setReceptions:i,setEnableLoading:c,enableLoading:d})]}),r?(0,s.jsx)(p.Z,{}):(0,s.jsx)(s.Fragment,{})]})};var J=i(95797);const q=()=>({desc:(0,g.Z)("general-public-label-description"),traceId:(0,g.Z)("general-public-tracking-code"),price:(0,g.Z)("freeze-contracts-label-price"),previewMsg:(0,g.Z)("general-public-preview"),deleteMsg:(0,g.Z)("general-public-label-delete")}),U=e=>{let{receiption:t}=e;const{desc:i,traceId:l,price:a}=q();return(0,s.jsxs)(n.Fragment,{children:[(0,s.jsx)(x,{firstText:(0,m.J)(null===t||void 0===t?void 0:t.Description),secondText:"".concat(i,":"),enableAlignItems:"center",fullWidth:!0}),(0,s.jsx)(x,{firstText:"".concat(null===t||void 0===t?void 0:t.ShomarePaigiri),secondText:"".concat(l,":"),enableAlignItems:"center",fullWidth:!0,textAlign:"right"}),(0,s.jsx)(x,{firstText:(0,v.B)(null===t||void 0===t?void 0:t.mablagh),secondText:"".concat(a,":"),enableAlignItems:"center",fullWidth:!0,textAlign:"right"})]})};var _=i(49540);const $=(e,t,i)=>{(async(e,t,i)=>{console.log("idTestimontial=>",{setReceptions:t,idTestimontial:i}),(0,Z.S)("POST","".concat("/api/Freez/DeleteFishHayPardakhti"),!0,{id:e}).then((e=>{1===e.data.resCode?T(i,t):(0,b.Z)("error",e.data.resMessage,!1)}))})(e,t,i)},G=(e,t,i)=>{const{previewMsg:n,deleteMsg:l}=q();return[{name:n,fn:()=>{var t;(0,_.R)("".concat(null===e||void 0===e?void 0:e.base64Extention).concat(null===e||void 0===e||null===(t=e.imageArrayContent)||void 0===t?void 0:t.image))},disabled:!1,icon:"",fwidth:"true",variant:"contained"},{name:l,fn:()=>{$(null===e||void 0===e?void 0:e.Id,t,null===i||void 0===i?void 0:i.IdTestimontial)},disabled:!1,icon:"",fwidth:"true",variant:"contained"}]},K=e=>{let{receiption:t,setReceptions:i,details:l}=e;return(0,s.jsx)(n.Fragment,{children:(0,s.jsx)(u.Z,{gap:".3em",children:(0,s.jsx)(J.Z,{VerticalIcons:!0,customtitle:(0,s.jsx)(U,{receiption:t}),isAction:!0,ArrayActions:G(t,i,l)})})})},Q=e=>{let{receiptions:t,setReceptions:i,details:l}=e;return(0,s.jsx)(n.Fragment,{children:(0,s.jsx)(u.Z,{gap:"1em",children:null===t||void 0===t?void 0:t.map((e=>(0,s.jsx)(K,{receiption:e,setReceptions:i,details:l},null===e||void 0===e?void 0:e.Id)))})})},X=e=>{let{details:t}=e;const[i,l]=(0,n.useState)([]);return(0,s.jsx)(n.Fragment,{children:(0,s.jsxs)(u.Z,{bgcolor:"white",gap:".5em",p:".5em",borderRadius:"20px",children:[(0,s.jsx)(h,{details:t,setReceptions:l}),(0,s.jsx)(V,{details:t,setReceptions:l}),0===i?(0,s.jsx)(p.Z,{}):(null===i||void 0===i?void 0:i.length)>0?(0,s.jsx)(Q,{receiptions:i,setReceptions:l,details:t}):(0,s.jsx)(s.Fragment,{})]})})},Y=e=>{let{details:t}=e;return(0,s.jsx)(n.Fragment,{children:(0,s.jsx)(X,{details:t})})},ee=e=>{let{details:t}=e;return(0,s.jsx)(n.Fragment,{children:(0,s.jsx)(c.Z,{cardProps:{p:".3em",borderRadius:"20px"},jsx:(0,s.jsx)(Y,{details:t})})})};var te=i(72279);const ie=()=>{var e;const t=null===(e=(0,n.useContext)(o))||void 0===e?void 0:e.contracts,i=(0,te.Z)(t);return(0,s.jsx)(n.Fragment,{children:(0,s.jsx)(u.Z,{gap:".5em",isplay:i?"grid":"",sx:{gridTemplateColumns:i?"repeat(2, 1fr) !important":"",direction:"rtl"},children:null===t||void 0===t?void 0:t.map((e=>(0,s.jsx)(ee,{details:e},null===e||void 0===e?void 0:e.ID)))})})},ne=()=>(0,s.jsx)(n.Fragment,{children:(0,s.jsx)(d,{children:(0,s.jsx)(l.Z,{sx:{pt:"1em"},children:(0,s.jsx)(ie,{})})})})}}]);
//# sourceMappingURL=28.f5520f86.chunk.js.map