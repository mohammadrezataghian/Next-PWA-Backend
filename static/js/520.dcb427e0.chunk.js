"use strict";(self.webpackChunknew_ui=self.webpackChunknew_ui||[]).push([[520],{99036:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(94162),o=n(30433),i=(n(72791),n(39230)),r=n(80184);const s=e=>{let{Icon:t,Gap:n,Text:s,isIconElement:l}=e;const{t:d,i18n:c}=(0,i.$G)();return(0,r.jsxs)(a.Z,{spacing:n,direction:"en"===(null===c||void 0===c?void 0:c.language)?"row":"row-reverse",children:[l||(0,r.jsx)("img",{width:20,height:20,src:t,alt:s}),(0,r.jsx)("p",{style:{color:"".concat(o.l.ColorPrimary," !important")},children:s})]})}},16520:(e,t,n)=>{n.r(t),n.d(t,{default:()=>oe});var a=n(72791),o=n(20803),i=n(79917),r=(n(88329),n(86775));n(36009);const s=async(e,t)=>{const n=JSON.parse(sessionStorage.getItem("patient"));return(0,r.S)("POST","".concat("/api/DoctorWorkList/ListElsFormsPatient"),!0,{allowConferm:!0,idInput:n.Id,idPatient:n.IdPatient,idPerson:n.IdPerson,idType:27}).then((n=>{1===n.data.resCode&&e((e=>({...e,[t.ObjName1]:n.data.Data.NewFormList,[t.ObjName2]:n.data.Data.InsertedFormList})))}))};var l=n(48313);const d=async(e,t)=>{const n=JSON.parse(sessionStorage.getItem("patient"));return(0,r.S)("POST","".concat("/api/ElsFormPatient/ElsFormsPatientAddOrEdit"),!0,{idElsFormPatient:0,formID:null===t||void 0===t?void 0:t.formId,patientFormID:0,idPatient:n.IdPatient,idType:27,idConfer:n.Id,AlloEdit:!0,idCartablPatient:0,idPerson:n.IdPerson}).then((n=>{1===n.data.resCode?e((e=>{var a,o,i,r,s,l,d,c,m,v,u;return{...e,[null===t||void 0===t?void 0:t.ObjName1]:null===n||void 0===n||null===(a=n.data)||void 0===a||null===(o=a.Data)||void 0===o||null===(i=o.Form)||void 0===i?void 0:i.GroupList,[null===t||void 0===t?void 0:t.ObjName2]:null===n||void 0===n||null===(r=n.data)||void 0===r||null===(s=r.Data)||void 0===s||null===(l=s.Form)||void 0===l?void 0:l.ListDetail,[null===t||void 0===t?void 0:t.ObjName3]:null===n||void 0===n||null===(d=n.data)||void 0===d||null===(c=d.Data)||void 0===c||null===(m=c.Form)||void 0===m?void 0:m.Id,[null===t||void 0===t?void 0:t.ObjName4]:null===n||void 0===n||null===(v=n.data)||void 0===v||null===(u=v.Data)||void 0===u?void 0:u.IdCartbalePatient}})):(0,i.Z)("error",n.data.resMessage,!1)}))},c=(e,t,n)=>{const o=a.useRef(!0);a.useMemo((()=>{o.current||e([{functions:s,parameters:{ObjName1:"MedicalFormOptions",ObjName2:"FormListView"}},{functions:d,parameters:{ObjName1:"FormView",ObjName2:"GroupElements",ObjName3:"GroupFormId",ObjName4:"IdCartablePatient",formId:n}}]),o.current=!1}),[t])},m=(e,t)=>{a.useEffect((()=>{e&&t((t=>[{functions:d,parameters:{ObjName1:"FormView",ObjName2:"GroupElements",ObjName3:"GroupFormId",ObjName4:"IdCartablePatient",formId:e}}]))}),[e])},v=(e,t,n,o,i,r,s,l)=>{a.useEffect((()=>{0===e.length&&i((a=>({...a,...t,title:e,setTitle:n,setformId:o,setStateBank:i,formId:r,setForceRender:s,setStateRecoil:l})))}),[e])},u=()=>{const[e,t]=a.useState(!1),[n,o]=a.useState([]),[i,r]=a.useState(""),[d,u]=a.useState(!1),[x,j]=a.useState(),[g,p]=a.useState([{functions:s,parameters:{ObjName1:"MedicalFormOptions",ObjName2:"FormListView"}}]);c(p,d,x),m(x,p);const{gatheredData:h}=(0,l.Z)(g,e);return v(i,h,r,j,o,x,t,u),a.useMemo((()=>{o((e=>({...e,...h,title:i,setTitle:r,setformId:j,setStateBank:o,formId:x,setForceRender:t,setStateRecoil:u})))}),[JSON.stringify(h),i,d]),n};var x=n(17205),j=n(73736),g=n(80184);const p=e=>{var t;let{StateBank:n}=e;return(0,g.jsx)(a.Fragment,{children:(0,g.jsx)(x.Z,{variant:"outlined",fullWidth:!0,sx:{mb:"1em",opacity:(null===n||void 0===n||null===(t=n.title)||void 0===t?void 0:t.length)>0?"initial":0},children:(0,j.J)(null===n||void 0===n?void 0:n.title)})})};var h=n(94162),f=n(81096),F=n(91888);const S="Medical_Form_Options_MedicalFormOptionsContainer__dRfKg";var I=n(96015);const Z=e=>{var t;let{image:n,element:o}=e;return(0,g.jsx)(a.Fragment,{children:(0,g.jsxs)(h.Z,{alignItems:"center",children:[(0,g.jsx)("img",{width:70,height:70,src:n,alt:null===o||void 0===o?void 0:o.Description}),(0,g.jsx)("p",{style:{textAlign:"center"},children:(0,j.J)((null===o||void 0===o||null===(t=o.Description)||void 0===t?void 0:t.length)>0?null===o||void 0===o?void 0:o.Description:null===o||void 0===o?void 0:o.Name)})]})})},O=e=>{let{element:t,stateBank:n}=e;const o=JSON.parse(localStorage.getItem("icons"));return(0,g.jsx)(a.Fragment,{children:(0,g.jsx)(I.Z,{onClick:()=>{var e;null===n||void 0===n||n.setTitle((null===t||void 0===t||null===(e=t.Description)||void 0===e?void 0:e.length)>0?null===t||void 0===t?void 0:t.Description:null===t||void 0===t?void 0:t.Name),null===n||void 0===n||n.setformId(null===t||void 0===t?void 0:t.ID)},children:(0,g.jsx)(Z,{image:"data:image/svg+xml;base64,"+(null===o||void 0===o?void 0:o.PatientFormIcon["".concat(null===t||void 0===t?void 0:t.idTypeForm,".svg")]),element:t})})})},P=e=>{var t;let{stateBank:n}=e;const o=(0,a.useContext)(f.k);return(0,g.jsxs)(a.Fragment,{children:[n.MedicalFormOptions?(0,g.jsx)(g.Fragment,{}):(0,g.jsx)(F.Z,{sx:{width:"100%",position:"sticky"}}),(0,g.jsx)(h.Z,{className:S,children:null===n||void 0===n||null===(t=n.MedicalFormOptions)||void 0===t?void 0:t.map((e=>(0,g.jsx)(O,{element:e,stateBank:n},o.uuidV4())))})]})},k=e=>{var t,n;let{StateBank:o}=e;return(0,g.jsx)(a.Fragment,{children:(0,g.jsxs)(h.Z,{alignItems:"center",marginTop:"1em",className:"add-new-els-form-title-box-color-layout",children:[(null===o||void 0===o||null===(t=o.title)||void 0===t?void 0:t.length)>0?(0,g.jsx)(p,{StateBank:o}):(0,g.jsx)(g.Fragment,{}),!(null!==o&&void 0!==o&&null!==(n=o.title)&&void 0!==n&&n.length)>0?(0,g.jsx)(P,{stateBank:o}):(0,g.jsx)(g.Fragment,{})]})})};var b=n(61667),C=n(97122);const N=e=>{const t=(0,C.A)(e),[n,o]=a.useState([]);return a.useEffect((()=>{e&&o(t)}),[e]),n},w=e=>{let{StateBank:t}=e;const n=N(t);return(0,g.jsx)(a.Fragment,{children:(0,g.jsx)(b.Z,{StateBank:t,fieldArrayName:"MedicalDefaultValues",DefaultValues:n})})};var D=n(81245);const y=(0,D.Z)((0,g.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}),"Save");var E=n(3710),T=n(28854),B=(n(30433),n(46843));const M=e=>{let{setToggleView:t}=e;const[n,o]=a.useState();return a.useEffect((()=>{t(n)}),[n]),(0,g.jsx)(a.Fragment,{children:(0,g.jsx)(h.Z,{alignItems:"center",sx:{mt:"1em"},className:"add-new-els-form-color-layout",children:(0,g.jsx)(T.Z,{disabled:(0,B.Z)("medical-form-actions-view-forms"),value:"check",selected:n,onChange:()=>{o(!n)},children:n?(0,g.jsx)(y,{}):(0,g.jsx)(E.Z,{})})})})};var G=n(8771),V=n(48928),R=n(99036);const L="List_View_Container_Card__gFONQ";var J=n(5397);const _=(0,D.Z)((0,g.jsx)("path",{d:"M19 8H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3zm-3 11H8v-5h8v5zm3-7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm-1-9H6v4h12V3z"}),"Print");var A=n(38820),H=n(13811);const Y=async(e,t)=>(0,r.S)("POST","".concat("/api/ElsFormPatient/Delete"),!0,{idElsFormPatient:e}).then((e=>{var n;1===e.data.resCode?t((e=>!e)):(0,i.Z)("error",null!==(n=e.data.resMessage)&&void 0!==n?n:"\u062e\u0637\u0627 \u062f\u0631 \u0634\u0628\u06a9\u0647",!1)}));var z=n(91397),U=(n(30178),n(49540));var W=n(97893),K=n(85667);const Q=e=>{let{element:t,StateBank:n}=e;return(0,g.jsx)(a.Fragment,{children:(0,g.jsx)(H.Z,{disabled:(0,B.Z)("medical-form-actions-unsave-forms")||(0,B.Z)("medical-form-actions-save-forms"),sx:{p:0},color:null!==t&&void 0!==t&&t.Conferm?"error":"success",onClick:()=>{null!==t&&void 0!==t&&t.Conferm?(async(e,t)=>{const n=JSON.parse(sessionStorage.getItem("patient"));(0,r.S)("POST","".concat("/api/ElsFormPatient/UnConfermElsFormsPatient"),!0,{idPerson:n.IdPerson,idElsFormPatient:e}).then((e=>{e.data.resCode?null===t||void 0===t||t.setForceRender((e=>!e)):(0,i.Z)("error",e.data.resMessage,!1)}))})(null===t||void 0===t?void 0:t.IdReport,n):(async(e,t)=>{const n=JSON.parse(sessionStorage.getItem("patient"));(0,r.S)("POST","".concat("/api/ElsFormPatient/ConfermElsFormsPatient"),!0,{idPerson:n.IdPerson,idElsFormPatient:e}).then((e=>{e.data.resCode?null===t||void 0===t||t.setForceRender((e=>!e)):(0,i.Z)("error",e.data.resMessage,!1)}))})(null===t||void 0===t?void 0:t.IdReport,n)},children:null!==t&&void 0!==t&&t.Conferm?(0,g.jsx)(W.Z,{}):(0,g.jsx)(K.Z,{})})})};var $=n(40918);const q=e=>{let{element:t,StateBank:n}=e;const o=(0,a.useContext)(f.k),s=(0,z.Z)("add-medical-font-alert-downloading"),l=(0,z.Z)("general-public-alert-network-error"),d=(0,$.Z)();return(0,g.jsx)(a.Fragment,{children:(0,g.jsxs)(h.Z,{direction:"row",spacing:".5em",children:[(0,g.jsx)(H.Z,{disabled:(null===t||void 0===t?void 0:t.Conferm)||(0,B.Z)("medical-form-actions-delete-form"),sx:{p:0},color:"error",onClick:()=>((e,t,n)=>{(0,i.Z)("warning","\u0622\u06cc\u0627 \u0627\u0632 \u062d\u0630\u0641 \u0627\u0637\u0645\u06cc\u0646\u0627\u0646 \u062f\u0627\u0631\u06cc\u062f\u061f",!0,(()=>{e(t.IdReport,n.setForceRender)}))})(Y,t,n),children:(0,g.jsx)(J.Z,{})}),(0,g.jsx)(H.Z,{disabled:(0,B.Z)("medical-form-actions-print-form-report"),sx:{p:0},color:"secondary",onClick:()=>(async(e,t,n)=>((0,i.Z)("warning",t,!1),(0,r.S)("POST","".concat("/api/ElsFormPatient/Print"),!0,{idElsFormPatient:e}).then((e=>{1===e.data.resCode?(0,U.R)(e.data.Data,"report","data:application/pdf;base64"):(0,i.Z)("error",n,!1)}))))(null===t||void 0===t?void 0:t.IdReport,s,l),children:(0,g.jsx)(_,{})}),(0,g.jsx)(H.Z,{sx:{p:0},color:"primary",disabled:(null===t||void 0===t?void 0:t.Conferm)||(0,B.Z)("medical-form-actions-edit-forms"),onClick:()=>{o.navigate(d<1024?"/EditPatientForm":"/main/EditPatientForm"),window.sessionStorage.setItem("EditableForm",JSON.stringify(t))},children:(0,g.jsx)(A.Z,{})}),(0,g.jsx)(Q,{element:t,StateBank:n})]})})},X=e=>{let{element:t,StateBank:n}=e;const o=JSON.parse(localStorage.getItem("icons")),i="data:image/svg+xml;base64,";return(0,g.jsx)(a.Fragment,{children:(0,g.jsx)(V.Z,{elevation:2,sx:{p:".3em"},className:"".concat(L," each-list-color-layout"),children:(0,g.jsxs)(h.Z,{sx:{backgroundColor:"white",p:"1em"},spacing:"1em",children:[(0,g.jsx)(R.Z,{Text:"".concat(t.Date,"\xa0\xa0\xa0\xa0\xa0").concat(t.Time),Icon:i+(null===o||void 0===o?void 0:o.GeneralIcon["DateAttendance.svg"]),Gap:"1em"}),(0,g.jsx)(R.Z,{Text:"".concat((0,j.J)(t.InsertUser)),Icon:i+(null===o||void 0===o?void 0:o.GeneralIcon["FullName.svg"]),Gap:"1em"}),(0,g.jsx)(R.Z,{Text:"".concat(t.Name),Icon:i+(null===o||void 0===o?void 0:o.GeneralIcon["Detection.svg"]),Gap:"1em"}),(0,g.jsx)(R.Z,{Text:0===t.LastUserUpdate.trim().length?"\u0628\u062f\u0648\u0646 \u062a\u063a\u06cc\u06cc\u0631":"".concat((0,j.J)(t.LastUserUpdate)),Icon:i+(null===o||void 0===o?void 0:o.GeneralIcon["DateAttendance.svg"]),Gap:"1em"}),(0,g.jsx)(q,{element:t,StateBank:n})]})})})};var ee=n(91601),te=n.n(ee);const ne=e=>e.sort(((e,t)=>{const n=te()(e.Date,"jYYYY/jM/jD").valueOf(),a=te()(t.Date,"jYYYY/jM/jD").valueOf();if(n===a){const n=te()(e.Time,"HH:mm").valueOf();return te()(t.Time,"HH:mm").valueOf()-n}return a-n})),ae=e=>{var t,n,o;let{listArray:i,StateBank:r}=e;const s=(0,a.useContext)(f.k),l=null===(t=(0,a.useContext)(f.k))||void 0===t?void 0:t.LanguageArray;return(0,g.jsx)(a.Fragment,{children:(0,g.jsx)(h.Z,{sx:{mt:"1em"},spacing:".5em",children:(null===(n=ne(i))||void 0===n?void 0:n.length)>0?null===(o=ne(i))||void 0===o?void 0:o.map((e=>(0,g.jsx)(X,{element:e,StateBank:r},s.uuidV4()))):(0,g.jsx)(G.Z,{severity:"warning",variant:"outlined",sx:{display:"flex",justifyContent:"center"},children:(0,z.Z)("general-public-flat-alert-no-data",l)})})})},oe=()=>{const e=u(),[t,n]=a.useState(!1);return(0,g.jsx)(a.Fragment,{children:(0,g.jsxs)(o.Z,{maxWidth:"md",children:[(0,g.jsx)(M,{setToggleView:n}),t?(0,g.jsx)(ae,{listArray:null===e||void 0===e?void 0:e.FormListView,StateBank:e}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(k,{StateBank:e}),(0,g.jsx)(w,{StateBank:e})]})]})})}}}]);
//# sourceMappingURL=520.dcb427e0.chunk.js.map