"use strict";(self.webpackChunknew_ui=self.webpackChunknew_ui||[]).push([[206],{71950:(e,t,a)=>{a.r(t),a.d(t,{default:()=>V});var r=a(20803),s=a(94162),n=a(48928),o=a(81096),i=a(72791),l=a(8171),c=a(82167),u=a(30286),m=a(1169),d=a(91397),h=a(45620),D=a(39230),g=a(80184);const v=e=>{let{setSearchAndDeliver:t,languageArray:a}=e;const[r,s]=(0,i.useState)(""),{t:n,i18n:o}=(0,D.$G)(),l=(0,h.Z)(r,1);return(0,i.useEffect)((()=>{null!==l&&t((e=>({...e,PatientSearchClause:l})))}),[l]),(0,g.jsx)(i.Fragment,{children:(0,g.jsxs)(u.Z,{component:"form",sx:{p:"2px 4px",display:"flex",alignItems:"center",marginTop:"2em",flexDirection:"en"===(null===o||void 0===o?void 0:o.language)&&"row-reverse",minHeight:"40px"},className:"current-patient-search-layout-color",children:[(0,g.jsx)(m.ZP,{size:"small",sx:{ml:1,flex:1,minHeight:"40px"},placeholder:(0,d.Z)("current-patients-search-bar",a),inputProps:{"aria-label":(0,d.Z)("current-patients-search-bar",a)},onChange:e=>s(e.target.value)}),(0,g.jsx)(c.Z,{})]})})};var p=a(79917),S=a(88329),x=a(86775);a(36009);var f=a(91601),Z=a.n(f),j=a(73705),C=a(83198);const F=(e,t)=>{const[a,r]=i.useState({PatientSearchClause:"",CurrentPatientList:[],FromDate:"",ToDate:""});return i.useEffect((()=>{if(sessionStorage.getItem("previousSearchDate")){const e=JSON.parse(sessionStorage.getItem("previousSearchDate"));r((t=>({...t,FromDate:e.FromDate,ToDate:e.ToDate})))}}),[a.FromDate,a.ToDate]),i.useMemo((()=>{a.FromDate&&a.ToDate&&((async(e,t,a)=>{var r;const s=S.Z.get("user")&&(null===(r=JSON.parse(S.Z.get("user")))||void 0===r?void 0:r.IdPerson);(0,x.S)("POST","".concat("/api/DoctorWorkList/GetCurrentPatient"),!0,{pageSize:0,startIndex:0,idPerson:s,clause:e.PatientSearchClause,fromDate:e.FromDate,toDate:e.ToDate,searchType:0,filterFormAndService:(null===a||void 0===a?void 0:a.ItemValue)||0}).then((e=>{1===e.data.tasks.resCode?t((t=>({...t,CurrentPatientList:e.data.tasks.Data}))):(0,p.Z)("error",e.data.tasks.resMessage,!1)}))})(a,r,t),Z()((0,j.W)()).locale("fa").format("jYYYY/jM/jD")===a.FromDate&&Z()((0,C.$)()).locale("fa").format("jYYYY/jM/jD")===a.FromDate||window.sessionStorage.setItem("previousSearchDate",JSON.stringify({FromDate:a.FromDate,ToDate:a.ToDate})))}),[a.PatientSearchClause,a.FromDate,a.ToDate,e,t]),{SearchAndDeliver:a,setSearchAndDeliver:r}};var T=a(82873),I=a(22505),P=a(87509),b=a(76313),y=a(97645),A=a(50494),k=(a(84074),a(94225));const w=()=>{const e=(0,d.Z)("genral-public-label-all");return{dataArray:[{ItemContent:e,ItemValue:0},{ItemContent:(0,d.Z)("current-patients-filter-selector-no-service"),ItemValue:4},{ItemContent:(0,d.Z)("current-patients-filter-selector-no-form"),ItemValue:3}],default_value:[{ItemContent:e,ItemValue:e}],show_msg:(0,d.Z)("genral-public-label-show-by")}},V=()=>{var e;const[t,a]=(0,i.useState)(0),[c]=(0,y.KO)(A._),[u,m]=i.useState(!1),{SearchAndDeliver:d,setSearchAndDeliver:h}=F(u,t),D=(0,i.useContext)(o.k),p=(0,b.Z)(null===d||void 0===d?void 0:d.CurrentPatientList),{list:S,handleTouchMove:f,handleScroll:Z}=(0,P.Z)(p),j=null===(e=(0,i.useContext)(o.k))||void 0===e?void 0:e.LanguageArray;(0,i.useEffect)((()=>()=>{sessionStorage.removeItem("quickActions")}),[]);const[C,V]=(0,i.useState)(null);(0,i.useEffect)((()=>{(0,x.S)("POST","".concat("/api/Public/GetTashkhisList"),!0,{idSystem:900,clause:""}).then((e=>{V(e.data.Data.list)}))}),[]);const{dataArray:Y,default_value:O,show_msg:_}=w();return(0,g.jsxs)(r.Z,{sx:{pb:"1em"},maxWidth:"md",children:[(0,g.jsx)(g.Fragment,{}),(0,g.jsx)(g.Fragment,{}),(0,g.jsx)(v,{setSearchAndDeliver:h,languageArray:j}),(0,g.jsxs)(s.Z,{alignItems:"center",children:[(0,g.jsx)(I.Z,{GetDateRange:h,initialValue:{FromDate:d.FromDate,ToDate:d.ToDate}}),(0,g.jsx)(k.Z,{SelectableDataArray:Y,initialData:O,isSingle:!0,label:_,enableInitialOnchange:!0,GetSelectedValue:a})]}),(0,g.jsxs)(s.Z,{marginTop:".3em",spacing:".5em",children:[(0,g.jsx)(g.Fragment,{}),(0,g.jsx)("div",{style:{all:"inherit"},onWheel:Z,onTouchMove:f,className:T.Z.patientContainer,children:null===S||void 0===S?void 0:S.map(((e,t)=>(0,g.jsx)(n.Z,{elevation:2,sx:{p:".3em",borderRadius:"20px"},className:T.Z.PatientCard,children:(0,g.jsx)(l.Z,{Patient:e,setForceRender:m,detections:C},D.uuidV4())},t)))})]})]})}}}]);
//# sourceMappingURL=206.cf17bec0.chunk.js.map