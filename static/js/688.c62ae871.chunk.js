"use strict";(self.webpackChunknew_ui=self.webpackChunknew_ui||[]).push([[688],{41333:(e,n,a)=>{a.d(n,{Z:()=>v});var t=a(94162),r=a(72791),l=a(58828),i=a(71937),o=a(21044),s=a(7802),d=a(39230),c=a(91397),u=a(80184);const v=e=>{let{label:n,onChange:a,errors:v,name:m}=e;const[g,h]=r.useState({Date:(0,l.d)(),Time:(0,i.c)()});r.useEffect((()=>{Object.values(g).length&&a&&a(g)}),[g]);const{t:b,i18n:Z}=(0,d.$G)();return(0,u.jsx)(r.Fragment,{children:(0,u.jsxs)(t.Z,{direction:"row",spacing:1,alignItems:"center",children:[(0,u.jsx)(o.Z,{i18n:Z,label:(0,c.Z)("general-public-history"),getter:h}),(0,u.jsx)(s.Z,{label:(0,c.Z)("general-public-label-time"),getter:h})]})})}},99688:(e,n,a)=>{a.r(n),a.d(n,{default:()=>z});var t=a(72791),r=a(20803),l=a(94162),i=a(61134),o=a(41333),s=a(92186),d=a(44503),c=a(80184);const u=(e,n,a,t)=>[{element:(0,c.jsx)(o.Z,{}),name:"timeHozoor",required:!0},{element:(0,c.jsx)(s.Z,{SelectableDataArray:null===e||void 0===e?void 0:e.DiagnosisList,label:t[0],isSingle:!0}),name:"idTashkhis",required:!0},{element:(0,c.jsx)(s.Z,{SelectableDataArray:null===e||void 0===e?void 0:e.InsuranceList,label:t[1],isSingle:!0}),name:"idInsurance",required:!0},{element:(0,c.jsx)(d.Z,{label:t[2]}),name:"description"}];var v=a(88329),m=a(58828),g=a(71937);const h=v.Z.get("user")&&(null===JSON||void 0===JSON?void 0:JSON.parse(null===v.Z||void 0===v.Z?void 0:v.Z.get("user"))),b={dateHozoor:(0,m.d)(),description:"",idInsurance:"",idPatient:"",idPerson:null===h||void 0===h?void 0:h.IdPerson,idTashkhis:"",timeHozoor:(0,g.c)(),DateRange:""};var Z=a(82167),p=a(79917),f=a(86775);a(36009);const S=async(e,n,a)=>(0,f.S)("POST","".concat("/api/Doctor/FindPatient"),!0,{SearchField:n,typeSearch:a}).then((n=>{1===n.data.resCode?e("FoundPatient",n.data.Data):(0,p.Z)("error",n.data.resMessage,!1)})),x=(e,n,a)=>{const t=11===e.length?4:10===e.length?0:e.length<=7?1:8===e.length?2:NaN;return S(a,e,t),t};var D=a(73736);const j=async e=>{var n;const a=v.Z.get("user")&&(null===(n=JSON.parse(v.Z.get("user")))||void 0===n?void 0:n.IdPerson);return(0,f.S)("POST","".concat("/api/Doctor/TashkhisList"),!0,{idPerson:a}).then((n=>{var a,t,r;1===n.data.resCode?e("DiagnosisList",null===n||void 0===n||null===(a=n.data)||void 0===a||null===(t=a.Data)||void 0===t||null===(r=t.list)||void 0===r?void 0:r.map((e=>{var n;return{ItemValue:null===e||void 0===e?void 0:e.Id,ItemContent:(null===(n=(0,D.J)(e.Name))||void 0===n?void 0:n.slice(0,30))+"".concat(e.Name.length>30?"...":"")}}))):(0,p.Z)("error",n.data.resMessage,!1)}))},I=async(e,n,a)=>{(0,f.S)("POST","".concat("/api/Public/GetInsuranceList"),!0,{clause:""}).then((t=>{1===t.data.resCode?a?n(t.data.Data.list.map((e=>({ItemValue:e.ID,ItemContent:(0,D.J)(e.Name)})))):e("InsuranceList",t.data.Data.list.map((e=>({ItemValue:e.ID,ItemContent:(0,D.J)(e.Name)})))):(0,p.Z)("error",t.data.resMessage,!1)}))},w="Container_Main_Stack_container__C7Cul";var y=a(48313),C=a(9181),F=a(9396),N=a(27965);const P=e=>{const[n,a]=t.useState(null),r=(e,n)=>{a((a=>({...a,[e]:n})))};return t.useEffect((()=>{e.forEach((e=>e(r)))}),[]),{ApiDataHandler:r,apiData:n}},k=e=>{let{content:n}=e;return(0,c.jsx)("div",{style:{borderRadius:"5px",backgroundColor:"#e0e0e0",padding:"4px 8px",maxWidth:"100%",whiteSpace:"normal",fontSize:"0.8125rem",fontWeight:400},children:n})},J=e=>{var n;let{patientinfo:a,eachLangueKey:r}=e;const i="".concat((0,D.J)((0,D.J)(null===a||void 0===a?void 0:a.FullName))," | ").concat(r[4]," : ").concat(null===a||void 0===a?void 0:a.Id," | ").concat(r[5]," : ").concat(null===a||void 0===a?void 0:a.Mobile),o="".concat(r[6]," : ").concat(""!==(0,D.J)(null===a||void 0===a?void 0:a.Address)?(0,D.J)(null===a||void 0===a?void 0:a.Address):r[7]," | ").concat(r[8]," : ").concat(null!==(n=null===a||void 0===a?void 0:a.FileNumber)&&void 0!==n?n:"".concat(r[9]));return(0,c.jsx)(t.Fragment,{children:(0,c.jsxs)(l.Z,{width:"100%",spacing:1,children:[(0,c.jsx)(k,{content:i}),(0,c.jsx)(k,{content:o})]})})},O=(e,n,a)=>{delete e.DateRange,delete e.Date;const t={...e,timeHozoor:e.timeHozoor.Time,dateHozoor:e.timeHozoor.Date,idPatient:n.FoundPatient.Id};console.log(a.current),0===Object.values(a.current).length||JSON.stringify(a.current)!==JSON.stringify(t)?((async e=>{(0,f.S)("POST","".concat("/api/Doctor/AddPatientToWorkList"),!0,{...e}).then((e=>{e.data.resCode,(0,p.Z)("success","\u0627\u0631\u062c\u0627\u0639 \u062c\u062f\u06cc\u062f \u062b\u0628\u062a \u0634\u062f",!1)}))})(t),a.current=t):(0,p.Z)("warning","\u0642\u0628\u0644\u0627 \u062b\u0628\u062a \u0634\u062f\u0647 \u0627\u0633\u062a",!1)};var T=a(39230),A=a(81096),L=a(91397),H=a(46843);const z=()=>{var e;(0,t.useMemo)((()=>j),[]);const n=(0,t.useMemo)((()=>I),[]),{HandleGatherData:a,gatheredData:o}=(0,y.Z)(S,!1,!0),{apiData:s}=P([n]),{control:d,formState:v,handleSubmit:m}=(0,i.cI)({defaultValues:b}),g=t.useRef({}),{t:h,i18n:p}=(0,T.$G)(),f=null===(e=(0,t.useContext)(A.k))||void 0===e?void 0:e.LanguageArray,D=[(0,L.Z)("general-public-label-diagnose",f),(0,L.Z)("general-public-insurance-list",f),(0,L.Z)("general-public-label-diagnose",f),(0,L.Z)("new-referral-input-patient-name-id",f),(0,L.Z)("new-referral-label-id",f),(0,L.Z)("general-public-mobile-number",f),(0,L.Z)("general-public-address",f),(0,L.Z)("new-referral-label-no-address",f),(0,L.Z)("new-referral-label-file-number",f),(0,L.Z)("new-referral-label-no-file-number",f)]||0,k=(0,H.Z)("new-referral-btn-add-referral");return(0,c.jsx)(t.Fragment,{children:(0,c.jsx)(r.Z,{children:(0,c.jsx)("form",{onKeyDown:e=>{"Enter"===e.key&&e.preventDefault()},onSubmit:m((e=>{O(e,o,g)})),children:(0,c.jsxs)(l.Z,{className:w,alignItems:"center",justifyContent:"center",children:[(0,c.jsx)(N.Z,{label:(0,L.Z)("new-referral-label-NFI",f),icon:(0,c.jsx)(Z.Z,{}),iconFn:x,callbackFn:a,isOctalAllowed:!0,isEnglish:"en"===(null===p||void 0===p?void 0:p.language)}),o instanceof Array===!1&&0!==(null===o||void 0===o?void 0:o.length)&&D.length>0&&o?(0,c.jsxs)(t.Fragment,{children:[(0,c.jsx)(J,{patientinfo:null===o||void 0===o?void 0:o.FoundPatient,eachLangueKey:D}),(0,c.jsx)(C.Z,{control:d,formState:v,DataArray:u(s,0,0,D)}),(0,c.jsx)(F.Z,{label:D[3],disabled:k})]}):(0,c.jsx)(c.Fragment,{})]})})})})}},71937:(e,n,a)=>{a.d(n,{c:()=>r});var t=a(33957);const r=()=>{var e;return(0,t.p)(null===(e=new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"2-digit",hour12:!1}))||void 0===e?void 0:e.format(new Date))}}}]);
//# sourceMappingURL=688.c62ae871.chunk.js.map