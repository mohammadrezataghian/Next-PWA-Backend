"use strict";(self.webpackChunknew_ui=self.webpackChunknew_ui||[]).push([[806],{49500:(e,t,a)=>{a.d(t,{H:()=>l});var n=a(79917),s=a(73736),i=a(86775);a(36009);const l=async(e,t)=>{(0,i.Post)("POST","".concat("/api/Public/GetTashkhisList"),!0,{idSystem:900,clause:""}).then((a=>{1===a.data.resCode?e({[t]:a.data.Data.list.map((e=>({ItemValue:e.Id,ItemContent:(0,s.J)(e.Name)})))}):(0,n.Z)("error",a.data.resMessage,!1)}))}},64084:(e,t,a)=>{a.r(t),a.d(t,{default:()=>A});var n=a(72791),s=a(94162),i=a(39230),l=a(91397),r=a(94225),o=a(80184);const c=e=>{let{setSearchType:t,languageArray:a}=e;const{t:c,i18n:d}=(0,i.$G)(),u=[{ItemContent:(0,l.Z)("patient-list-radio-type-all",a),ItemValue:"0"},{ItemContent:(0,l.Z)("patient-list-radio-type-ended",a),ItemValue:"2"},{ItemContent:(0,l.Z)("patient-list-radio-type-canceled",a),ItemValue:"3"}],h=(0,l.Z)("lab-patient-tarikh-type-label");return(0,o.jsx)(n.Fragment,{children:(0,o.jsx)(s.Z,{width:"100%",children:(0,o.jsx)(r.Z,{SelectableDataArray:u,initialData:[{ItemContent:(0,l.Z)("patient-list-radio-type-all",a),ItemValue:(0,l.Z)("patient-list-radio-type-all",a)}],label:h,onChange:e=>{t(e)},enableInitialOnchange:!0,isSingle:!0})})})};var d=a(92186),u=a(22505),h=a(34675),m=a(82167);const p={fromDate:new Intl.DateTimeFormat("fa-u-ca-persian-nu-latn",{dateStyle:"short"}).format((new Date).setMonth((new Date).getMonth()-1)),toDate:new Intl.DateTimeFormat("fa-u-ca-persian-nu-latn",{dateStyle:"short"}).format(new Date),idTashkhisList:"",idInsuranceList:"",patientSearchField:"",searchType:0};var g=a(79917),v=a(88329),y=a(86775);a(36009);const S=async(e,t)=>{const a=JSON.parse(v.Z.get("user"));console.log("parameters->",t),(0,y.Post)("POST","".concat("/api/DoctorWorkList/PatientList"),!0,{...t.data,idPerson:a.IdPerson}).then((a=>{1===a.data.tasks.resCode?e&&e((e=>({...e,[t.objName]:a.data.tasks.Data}))):(0,g.Z)("error",a.data.tasks.resMessage,!1)}))};var D=a(83405);const x=e=>{const[t,a]=n.useState(),[s,i]=n.useState(""),[l,r]=n.useState(""),[o,c]=n.useState(""),[d,u]=n.useState("");return n.useEffect((()=>{var a;null!==t&&void 0!==t&&t.ItemContent&&!Object.values(o).some((e=>0===e.length))&&e([{functions:D.e,parameters:"InsuranceList"},{functions:S,parameters:{objName:"PatientList",data:{...p,idInsuranceList:null===t||void 0===t||null===(a=t.ItemContent)||void 0===a?void 0:a.join(","),idTashkhisList:(null===d||void 0===d?void 0:d.ItemContent.join(","))||"",patientSearchField:l.length&&l||"",searchType:s.length&&parseInt(s)||0,fromDate:null===o||void 0===o?void 0:o.FromDate,toDate:null===o||void 0===o?void 0:o.ToDate}}}])}),[t,s,l,o,d]),{setSearchType:i,setInsuranceSelector:a,setDetectorList:u,setDateRangeValue:c,HandlePatientSearchField:e=>{r(e.target.value)}}},I=e=>{let{StateBank:t,setFunctionArray:a,languageArray:s}=e;const{t:r,i18n:p}=(0,i.$G)(),{setSearchType:g,setInsuranceSelector:v,setDetectorList:y,setDateRangeValue:S,HandlePatientSearchField:D}=x(a);(0,l.Z)("general-public-search-based-on");return(0,o.jsxs)(n.Fragment,{children:[(0,o.jsx)(c,{setSearchType:g,languageArray:s}),(0,o.jsx)(d.Z,{label:(0,l.Z)("general-public-insurance-list",s),SelectableDataArray:null===t||void 0===t?void 0:t.InsuranceList,GetSelectedValue:v}),(0,o.jsx)(d.Z,{label:(0,l.Z)("patient-list-select-diagnosis-list",s),SelectableDataArray:null===t||void 0===t?void 0:t.DetectionList,GetSelectedValue:y}),(0,o.jsx)(u.Z,{GetDateRange:S,ExcludeOneMonth:!0,KeepSelectedDate:!0}),(0,o.jsx)(h.Z,{label:(0,l.Z)("patient-list-input-search-name-id",s),onlyIcon:(0,o.jsx)(m.Z,{}),CustomOnChange:D,isEnglish:"en"===(null===p||void 0===p?void 0:p.language),styles:{marginTop:"-1em"}})]})};var Z=a(20803),j=a(48313),b=a(49500);const f=()=>{const[e,t]=n.useState([]),[a,s]=n.useState();n.useLayoutEffect((()=>{t([{functions:D.e,parameters:"InsuranceList"},{functions:b.H,parameters:"DetectionList"}])}),[]);const{gatheredData:i}=(0,j.Z)(e);return n.useMemo((()=>{s(i)}),[i,e]),[a,t]};var C=a(67675),L=a(70732),T=a(48928),k=a(82873),w=a(87509),P=a(76313);const F=e=>{let{patientList:t}=e;const a=(0,P.Z)(t),{list:s,handleTouchMove:i,handleScroll:l}=(0,w.Z)(a),r=(0,n.useContext)(C.k);return(0,o.jsx)(n.Fragment,{children:(0,o.jsx)("div",{style:{all:"inherit",display:"flex",flexDirection:"column",gap:"8px",width:"100%"},onWheel:l,onTouchMove:i,children:null===s||void 0===s?void 0:s.map(((e,t)=>(0,o.jsx)(T.Z,{elevation:2,sx:{p:".3em",borderRadius:"20px",width:"100%"},className:k.Z.PatientCard,children:(0,o.jsx)(L.Z,{Patient:e,bgColor:null!==e&&void 0!==e&&e.EndOfTreatment?"yellowgreen":null!==e&&void 0!==e&&e.CancelByDoctor?"yellow":"",disableActions:(null===e||void 0===e?void 0:e.EndOfTreatment)||(null===e||void 0===e?void 0:e.CancelByDoctor)},r.uuidV4())},t)))})})},A=()=>{var e;const t=null===(e=(0,n.useContext)(C.k))||void 0===e?void 0:e.LanguageArray,[a,i]=f();return(0,o.jsx)(n.Fragment,{children:(0,o.jsx)(Z.Z,{maxWidth:"md",children:(0,o.jsxs)(s.Z,{marginTop:"1em",alignItems:"center",gap:".5em",children:[(0,o.jsx)(I,{StateBank:a,setFunctionArray:i,languageArray:t}),(0,o.jsx)(F,{patientList:null===a||void 0===a?void 0:a.PatientList,languageArray:t})]})})})}}}]);
//# sourceMappingURL=806.62a6b61b.chunk.js.map