"use strict";(self.webpackChunknew_ui=self.webpackChunknew_ui||[]).push([[688],{41333:(e,n,a)=>{a.d(n,{Z:()=>m});var t=a(94162),r=a(72791),l=a(58828),i=a(71937),o=a(21044),s=a(7802),d=a(39230),c=a(91397),u=a(80184);const m=e=>{let{label:n,onChange:a,errors:m,name:g}=e;const[v,h]=r.useState({Date:(0,l.d)(),Time:(0,i.c)()});r.useEffect((()=>{Object.values(v).length&&a&&a(v)}),[v]);const{t:b,i18n:p}=(0,d.$G)();return(0,u.jsx)(r.Fragment,{children:(0,u.jsxs)(t.Z,{direction:"row",spacing:1,alignItems:"center",children:[(0,u.jsx)(o.Z,{i18n:p,label:(0,c.Z)("general-public-history"),getter:h}),(0,u.jsx)(s.Z,{label:(0,c.Z)("general-public-label-time"),getter:h})]})})}},7802:(e,n,a)=>{a.d(n,{Z:()=>h});var t=a(75017),r=a(37669),l=a(97892),i=a.n(l),o=a(36571),s=a(56056),d=a(72791),c=a(33957),u=a(95338),m=a(85773),g=a(91397),v=a(80184);const h=e=>{let{label:n,onChange:a,errors:l,name:h,getter:b,isDateTime:p=!1,isEnglish:Z=!0,OutputInMinutes:x=!1}=e;const[f,j]=d.useState(i()(new Date)),D=(0,g.Z)("general-public-label-approve"),S=(0,g.Z)("general-public-label-dismiss");return(0,v.jsx)(o._,{dateAdapter:r.Z,localeText:{okButtonLabel:D,cancelButtonLabel:S},children:(0,v.jsx)("div",{dir:Z?"ltr":"rtl",children:(0,v.jsx)(s.d,{label:n,ampm:!1,value:f,onChange:e=>{j(e),!p&&a&&a(x?(0,c.p)((0,u.S)(e)):(0,u.S)(e)),b&&b((n=>({...n,Time:(0,c.p)((0,u.S)(e))})))},renderInput:e=>Z?(0,v.jsx)(t.Z,{color:"colorPrimer",...e,fullWidth:!0,InputProps:{style:{maxHeight:"40px"}}}):(0,v.jsx)(m.Z,{color:"colorPrimer",...e,fullWidth:!0})})})})}},99688:(e,n,a)=>{a.r(n),a.d(n,{default:()=>z});var t=a(72791),r=a(20803),l=a(94162),i=a(61134),o=a(41333),s=a(92186),d=a(34675),c=a(80184);const u=(e,n,a,t)=>[{element:(0,c.jsx)(o.Z,{}),name:"timeHozoor",required:!0},{element:(0,c.jsx)(s.Z,{SelectableDataArray:null===e||void 0===e?void 0:e.DiagnosisList,label:t[0],isSingle:!0}),name:"idTashkhis",required:!0},{element:(0,c.jsx)(s.Z,{SelectableDataArray:null===e||void 0===e?void 0:e.InsuranceList,label:t[1],isSingle:!0}),name:"idInsurance",required:!0},{element:(0,c.jsx)(d.Z,{label:t[10]}),name:"description"}];var m=a(88329),g=a(58828),v=a(71937);const h=m.Z.get("user")&&(null===JSON||void 0===JSON?void 0:JSON.parse(null===m.Z||void 0===m.Z?void 0:m.Z.get("user"))),b={dateHozoor:(0,g.d)(),description:"",idInsurance:"",idPatient:"",idPerson:null===h||void 0===h?void 0:h.IdPerson,idTashkhis:"",timeHozoor:(0,v.c)(),DateRange:""};var p=a(82167),Z=a(79917),x=a(86775);a(36009);const f=async(e,n,a)=>(0,x.Post)("POST","".concat("/api/Doctor/FindPatient"),!0,{SearchField:n,typeSearch:a}).then((n=>{1===n.data.resCode?e("FoundPatient",n.data.Data):(0,Z.Z)("error",n.data.resMessage,!1)})),j=(e,n,a)=>{const t=11===e.length?4:10===e.length?0:e.length<=7?1:8===e.length?2:NaN;return f(a,e,t),t};var D=a(73736);const S=async e=>{var n;const a=m.Z.get("user")&&(null===(n=JSON.parse(m.Z.get("user")))||void 0===n?void 0:n.IdPerson);return(0,x.Post)("POST","".concat("/api/Doctor/TashkhisList"),!0,{idPerson:a}).then((n=>{var a,t,r;1===n.data.resCode?e("DiagnosisList",null===n||void 0===n||null===(a=n.data)||void 0===a||null===(t=a.Data)||void 0===t||null===(r=t.list)||void 0===r?void 0:r.map((e=>{var n;return{ItemValue:null===e||void 0===e?void 0:e.Id,ItemContent:(null===(n=(0,D.J)(e.Name))||void 0===n?void 0:n.slice(0,30))+"".concat(e.Name.length>30?"...":"")}}))):(0,Z.Z)("error",n.data.resMessage,!1)}))},I=async(e,n,a)=>{(0,x.Post)("POST","".concat("/api/Public/GetInsuranceList"),!0,{clause:""}).then((t=>{1===t.data.resCode?a?n(t.data.Data.list.map((e=>({ItemValue:e.ID,ItemContent:(0,D.J)(e.Name)})))):e("InsuranceList",t.data.Data.list.map((e=>({ItemValue:e.ID,ItemContent:(0,D.J)(e.Name)})))):(0,Z.Z)("error",t.data.resMessage,!1)}))},P="Container_Main_Stack_container__HxvrX";var w=a(48313),y=a(9181),C=a(9396),F=a(27965);const N=e=>{const[n,a]=t.useState(null),r=(e,n)=>{a((a=>({...a,[e]:n})))};return t.useEffect((()=>{e.forEach((e=>e(r)))}),[]),{ApiDataHandler:r,apiData:n}},k=e=>{let{content:n}=e;return(0,c.jsx)("div",{style:{borderRadius:"5px",backgroundColor:"#e0e0e0",padding:"4px 8px",maxWidth:"100%",whiteSpace:"normal",fontSize:"0.8125rem",fontWeight:400},children:n})},O=e=>{var n;let{patientinfo:a,eachLangueKey:r}=e;const i="".concat((0,D.J)((0,D.J)(null===a||void 0===a?void 0:a.FullName))," | ").concat(r[4]," : ").concat(null===a||void 0===a?void 0:a.Id," | ").concat(r[5]," : ").concat(null===a||void 0===a?void 0:a.Mobile),o="".concat(r[6]," : ").concat(""!==(0,D.J)(null===a||void 0===a?void 0:a.Address)?(0,D.J)(null===a||void 0===a?void 0:a.Address):r[7]," | ").concat(r[8]," : ").concat(null!==(n=null===a||void 0===a?void 0:a.FileNumber)&&void 0!==n?n:"".concat(r[9]));return(0,c.jsx)(t.Fragment,{children:(0,c.jsxs)(l.Z,{width:"100%",spacing:1,children:[(0,c.jsx)(k,{content:i}),(0,c.jsx)(k,{content:o})]})})},T=(e,n,a)=>{delete e.DateRange,delete e.Date;const t={...e,timeHozoor:e.timeHozoor.Time,dateHozoor:e.timeHozoor.Date,idPatient:n.FoundPatient.Id};console.log(a.current),0===Object.values(a.current).length||JSON.stringify(a.current)!==JSON.stringify(t)?((async e=>{(0,x.Post)("POST","".concat("/api/Doctor/AddPatientToWorkList"),!0,{...e}).then((e=>{e.data.resCode,(0,Z.Z)("success","\u0627\u0631\u062c\u0627\u0639 \u062c\u062f\u06cc\u062f \u062b\u0628\u062a \u0634\u062f",!1)}))})(t),a.current=t):(0,Z.Z)("warning","\u0642\u0628\u0644\u0627 \u062b\u0628\u062a \u0634\u062f\u0647 \u0627\u0633\u062a",!1)};var J=a(39230),L=a(67675),A=a(91397),H=a(46843);const z=()=>{var e;const n=(0,t.useMemo)((()=>S),[]),a=(0,t.useMemo)((()=>I),[]),{HandleGatherData:o,gatheredData:s}=(0,w.Z)(f,!1,!0),{apiData:d}=N([a,n]),{control:m,formState:g,handleSubmit:v}=(0,i.cI)({defaultValues:b}),h=t.useRef({}),{t:Z,i18n:x}=(0,J.$G)(),D=null===(e=(0,t.useContext)(L.k))||void 0===e?void 0:e.LanguageArray,k=[(0,A.Z)("general-public-label-diagnose",D),(0,A.Z)("general-public-insurance-list",D),(0,A.Z)("general-public-label-diagnose",D),(0,A.Z)("new-referral-input-patient-name-id",D),(0,A.Z)("new-referral-label-id",D),(0,A.Z)("general-public-mobile-number",D),(0,A.Z)("general-public-address",D),(0,A.Z)("new-referral-label-no-address",D),(0,A.Z)("new-referral-label-file-number",D),(0,A.Z)("new-referral-label-no-file-number",D),(0,A.Z)("general-public-label-sarh-hal",D)]||0,z=(0,H.Z)("new-referral-btn-add-referral");return console.log("apiData==>",d),(0,c.jsx)(t.Fragment,{children:(0,c.jsx)(r.Z,{children:(0,c.jsx)("form",{onKeyDown:e=>{"Enter"===e.key&&e.preventDefault()},onSubmit:v((e=>{T(e,s,h)})),children:(0,c.jsxs)(l.Z,{className:P,alignItems:"center",justifyContent:"center",children:[(0,c.jsx)(F.Z,{label:(0,A.Z)("new-referral-label-NFI",D),icon:(0,c.jsx)(p.Z,{}),iconFn:j,callbackFn:o,isOctalAllowed:!0,isEnglish:"en"===(null===x||void 0===x?void 0:x.language)}),s instanceof Array===!1&&0!==(null===s||void 0===s?void 0:s.length)&&k.length>0&&s?(0,c.jsxs)(t.Fragment,{children:[(0,c.jsx)(O,{patientinfo:null===s||void 0===s?void 0:s.FoundPatient,eachLangueKey:k}),(0,c.jsx)(y.Z,{control:m,formState:g,DataArray:u(d,0,0,k)}),(0,c.jsx)(C.Z,{label:k[3],disabled:z})]}):(0,c.jsx)(c.Fragment,{})]})})})})}},71937:(e,n,a)=>{a.d(n,{c:()=>r});var t=a(33957);const r=()=>{var e;return(0,t.p)(null===(e=new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"2-digit",hour12:!1}))||void 0===e?void 0:e.format(new Date))}}}]);
//# sourceMappingURL=688.e4d10d65.chunk.js.map