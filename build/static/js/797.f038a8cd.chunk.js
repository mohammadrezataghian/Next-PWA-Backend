"use strict";(self.webpackChunknew_ui=self.webpackChunknew_ui||[]).push([[797],{69758:(e,t,a)=>{a.r(t),a.d(t,{default:()=>k});var r=a(20803),s=a(94162),n=a(48928),o=a(67675),i=a(72791),l=a(70732),c=a(49706),u=a(79917),m=a(88329),d=a(86775);a(36009);var D=a(91601),h=a.n(D),v=a(73705),S=a(83198);const g=(e,t)=>{const[a,r]=i.useState({PatientSearchClause:"",CurrentPatientList:[],FromDate:"",ToDate:""});return i.useEffect((()=>{if(sessionStorage.getItem("previousSearchDate")){const e=JSON.parse(sessionStorage.getItem("previousSearchDate"));r((t=>({...t,FromDate:e.FromDate,ToDate:e.ToDate})))}}),[a.FromDate,a.ToDate]),i.useMemo((()=>{a.FromDate&&a.ToDate&&((async(e,t,a)=>{var r;const s=m.Z.get("user")&&(null===(r=JSON.parse(m.Z.get("user")))||void 0===r?void 0:r.IdPerson);(0,d.Post)("POST","".concat("/api/DoctorWorkList/GetCurrentPatient"),!0,{pageSize:0,startIndex:0,idPerson:s,clause:e.PatientSearchClause,fromDate:e.FromDate,toDate:e.ToDate,searchType:0,filterFormAndService:(null===a||void 0===a?void 0:a.ItemValue)||0}).then((e=>{1===e.data.tasks.resCode?t((t=>({...t,CurrentPatientList:e.data.tasks.Data}))):(0,u.Z)("error",e.data.tasks.resMessage,!1)}))})(a,r,t),h()((0,v.W)()).locale("fa").format("jYYYY/jM/jD")===a.FromDate&&h()((0,S.$)()).locale("fa").format("jYYYY/jM/jD")===a.FromDate||window.sessionStorage.setItem("previousSearchDate",JSON.stringify({FromDate:a.FromDate,ToDate:a.ToDate})))}),[a.PatientSearchClause,a.FromDate,a.ToDate,e,t]),{SearchAndDeliver:a,setSearchAndDeliver:r}};var p=a(82873),f=a(22505),Z=a(87509),x=a(76313),C=a(97645),j=a(50494),F=(a(84074),a(94225)),T=a(91397);const I=()=>{const e=(0,T.Z)("genral-public-label-all");return{dataArray:[{ItemContent:e,ItemValue:0},{ItemContent:(0,T.Z)("current-patients-filter-selector-no-service"),ItemValue:4},{ItemContent:(0,T.Z)("current-patients-filter-selector-no-form"),ItemValue:3}],default_value:[{ItemContent:e,ItemValue:e}],show_msg:(0,T.Z)("genral-public-label-show-by")}};var P=a(74164),b=a(30433),y=a(80184);const k=()=>{var e;const[t,a]=(0,i.useState)(0),[u]=(0,C.KO)(j._),[m,D]=i.useState(!1),{SearchAndDeliver:h,setSearchAndDeliver:v}=g(m,t),S=(0,i.useContext)(o.k),T=(0,x.Z)(null===h||void 0===h?void 0:h.CurrentPatientList),{list:k,handleTouchMove:A,handleScroll:w}=(0,Z.Z)(T),V=null===(e=(0,i.useContext)(o.k))||void 0===e?void 0:e.LanguageArray;(0,i.useEffect)((()=>()=>{sessionStorage.removeItem("quickActions")}),[]);const[Y,L]=(0,i.useState)(null);(0,i.useEffect)((()=>{(0,d.Post)("POST","".concat("/api/Public/GetTashkhisList"),!0,{idSystem:900,clause:""}).then((e=>{L(e.data.Data.list)}))}),[]);const{dataArray:O,default_value:_,show_msg:M}=I(),N=(0,P.Z)();return(0,y.jsxs)(r.Z,{sx:{pb:"1em"},maxWidth:"md",children:[(0,y.jsx)(y.Fragment,{}),(0,y.jsx)(y.Fragment,{}),(0,y.jsx)(c.Z,{setSearchAndDeliver:v,languageArray:V}),(0,y.jsxs)(s.Z,{alignItems:"center",children:[(0,y.jsx)(f.Z,{GetDateRange:v,initialValue:{FromDate:h.FromDate,ToDate:h.ToDate}}),(0,y.jsx)(F.Z,{SelectableDataArray:O,initialData:_,isSingle:!0,label:M,enableInitialOnchange:!0,GetSelectedValue:a})]}),(0,y.jsxs)(s.Z,{marginTop:".3em",spacing:".5em",children:[(0,y.jsx)(y.Fragment,{}),(0,y.jsx)("div",{style:{all:"inherit"},onWheel:w,onTouchMove:A,className:p.Z.patientContainer,children:null===k||void 0===k?void 0:k.map(((e,t)=>(0,y.jsx)(n.Z,{elevation:2,sx:{p:".3em",borderRadius:"20px"},className:p.Z.PatientCard,children:(0,y.jsx)(l.Z,{Patient:e,setForceRender:D,detections:Y,documentSummaryList:N,bgcolor:"".concat(b.l.ColorSecondary," !important")},S.uuidV4())},t)))})]})]})}}}]);
//# sourceMappingURL=797.f038a8cd.chunk.js.map