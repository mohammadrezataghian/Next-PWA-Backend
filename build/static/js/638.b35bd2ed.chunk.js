"use strict";(self.webpackChunknew_ui=self.webpackChunknew_ui||[]).push([[638],{45638:(e,n,t)=>{t.r(n),t.d(n,{default:()=>T});var a=t(72791),r=t(96015),s=t(94162),o=t(91888);var c=t(39230),l=t(80184);var d=t(48313),i=t(79917),u=t(67675),v=t(88329),g=t(86775);t(36009);const b=async e=>{var n;const t=v.Z.get("user")&&(null===(n=JSON.parse(v.Z.get("user")))||void 0===n?void 0:n.IdPerson);console.log("IdPerson---\x3e",t),(0,g.Post)("POST","".concat("/api/Acc/PersonHesabList"),!0,{idPerson:t}).then((n=>{var t;1===n.data.resCode?e(null===n||void 0===n||null===(t=n.data)||void 0===t?void 0:t.Data):(0,i.Z)("error",n.data.resMessage,!1)}))};var m=t(48928);const h=e=>{let{title:n,content:t,i18n:r}=e;return(0,l.jsx)(a.Fragment,{children:(0,l.jsxs)(s.Z,{direction:"en"===(null===r||void 0===r?void 0:r.language)?"row":"row-reverse",justifyContent:"space-between",width:"100%",children:[(0,l.jsx)("p",{children:n}),(0,l.jsx)("p",{children:t})]})})};var Z=t(91397);const x=e=>{var n;let{element:t}=e;const r=null===(n=(0,a.useContext)(u.k))||void 0===n?void 0:n.LanguageArray,{i18n:s}=(0,c.$G)();return(0,l.jsxs)(a.Fragment,{children:[(0,l.jsx)(h,{title:"".concat((0,Z.Z)("bank-account-list-input-card-number",r),":"),content:null===t||void 0===t?void 0:t.FldShomareCart,i18n:s}),(0,l.jsx)(h,{title:"".concat((0,Z.Z)("bank-account-list-input-account-number",r),":"),content:null===t||void 0===t?void 0:t.FldHesabNo,i18n:s}),(0,l.jsx)(h,{title:"".concat((0,Z.Z)("bank-account-list-shaba-number",r),":"),content:null===t||void 0===t?void 0:t.FldShomareShaba,i18n:s})]})},k=async(e,n)=>{var t;const a=v.Z.get("user")&&(null===(t=JSON.parse(v.Z.get("user")))||void 0===t?void 0:t.IdPerson);(0,g.Post)("POST","".concat("/api/Acc/ActivePersonHesab"),!0,{idPerson:a,id:e}).then((e=>{1===e.data.resCode?(0,i.Z)("success",e.data.resMessage,!1).then((()=>n((e=>!e)))):(0,i.Z)("error",e.data.resMessage,!1)}))},j=async(e,n)=>{var t;const a=v.Z.get("user")&&(null===(t=JSON.parse(v.Z.get("user")))||void 0===t?void 0:t.IdPerson);(0,g.Post)("POST","".concat("/api/Acc/DeActivePersonHesab"),!0,{idPerson:a,id:e}).then((e=>{1===e.data.resCode?(0,i.Z)("success",e.data.resMessage,!1).then((()=>n((e=>!e)))):(0,i.Z)("error",e.data.resMessage,!1)}))};var p=t(17205),S=t(46843);const P=e=>{var n;let{ActivateBankAccount:t,id:r,setForceRender:s}=e;const o=null===(n=(0,a.useContext)(u.k))||void 0===n?void 0:n.LanguageArray,c=(0,Z.Z)("bank-account-list-alert-sure-delete");return(0,l.jsxs)(a.Fragment,{children:[(0,l.jsx)(p.Z,{color:"colorPrimer",variant:"contained",fullWidth:!0,onClick:e=>{t(r,s),e.stopPropagation()},disabled:(0,S.Z)("bank-account-list-btn-activate-account"),children:(0,Z.Z)("bank-account-list-btn-activate-bank-account",o)}),(0,l.jsx)(p.Z,{color:"error",variant:"contained",onClick:e=>{e.stopPropagation(),(0,i.Z)("warning",c,!0,(()=>{(async(e,n)=>{var t;const a=v.Z.get("user")&&(null===(t=JSON.parse(v.Z.get("user")))||void 0===t?void 0:t.IdPerson);(0,g.Post)("POST","".concat("/api/Acc/DeletePersonHesab"),!0,{idPerson:a,id:e}).then((e=>{1===e.data.resCode?(0,i.Z)("success",e.data.resMessage,!1).then((()=>n((e=>!e)))):(0,i.Z)("error",e.data.resMessage,!1)}))})(r,s)}))},disabled:(0,S.Z)("bank-account-list-btn-delete-account"),children:(0,Z.Z)("general-public-label-delete",o)})]})},F=e=>{var n;let{DeactiveBankAccount:t,id:r,setForceRender:s}=e;const o=null===(n=(0,a.useContext)(u.k))||void 0===n?void 0:n.LanguageArray;return(0,l.jsx)(p.Z,{disabled:(0,S.Z)("bank-account-list-btn-deactivate-account"),color:"error",variant:"contained",fullWidth:!0,onClick:e=>{t(r,s),e.stopPropagation()},children:(0,Z.Z)("bank-account-list-btn-deactivate-bank-account",o)})},A=e=>{let{id:n,setForceRender:t,ActiveHesab:r}=e;const{i18n:o}=(0,c.$G)();return(0,l.jsx)(a.Fragment,{children:(0,l.jsx)(s.Z,{alignItems:"center",direction:"en"===(null===o||void 0===o?void 0:o.language)?"row":"row-reverse",spacing:1,width:"100%",className:"account-operations-color-design",children:r?(0,l.jsx)(F,{DeactiveBankAccount:j,id:n,setForceRender:t}):(0,l.jsx)(P,{ActivateBankAccount:k,id:n,setForceRender:t})})})};var C=t(73736);const I=e=>{var n;let{GlobalConstants:t,setSelectedElement:r,element:o,setForceRender:c,SelectedElement:d}=e;return(0,l.jsx)(a.Fragment,{children:(0,l.jsx)(m.Z,{sx:{width:"100%",p:"1em",border:d&&(null===(n=d[0])||void 0===n?void 0:n.FldId)===o.FldId?"2px solid #88d4d4":"unset"},onClick:e=>{r([o]),e.stopPropagation()},children:(0,l.jsxs)(s.Z,{alignItems:"flex-end",spacing:1,children:[(0,l.jsx)("h4",{style:{textAlign:"center",width:"100%"},children:(0,C.J)(null===o||void 0===o?void 0:o.NameBank)}),(0,l.jsx)("br",{}),(0,l.jsx)(x,{element:o}),(0,l.jsx)(A,{id:null===o||void 0===o?void 0:o.FldId,setForceRender:c,ActiveHesab:null===o||void 0===o?void 0:o.ActiveHesab})]})},t.uuidV4())})},y=e=>{let{forceRender:n,setForceRender:t,setSelectedElement:c,SelectedElement:i,languageArray:v}=e;const{gatheredData:g}=(0,d.Z)(b,n),m=(0,a.useContext)(u.k);return(0,l.jsxs)(a.Fragment,{children:[(0,l.jsx)(l.Fragment,{}),(0,l.jsx)(r.Z,{sx:{marginTop:"1em"},children:(0,l.jsx)(s.Z,{spacing:1,children:g?null===g||void 0===g?void 0:g.map((e=>(0,l.jsx)(I,{GlobalConstants:m,setSelectedElement:c,element:e,setForceRender:t,SelectedElement:i},m.uuidV4()))):(0,l.jsx)(o.Z,{color:"colorPrimer"})})})]})};var f=t(9396),w=t(9181),N=t(61134);const R=async e=>{var n;const t=v.Z.get("user")&&(null===(n=JSON.parse(v.Z.get("user")))||void 0===n?void 0:n.IdPerson);(0,g.Post)("POST","".concat("/api/Acc/BankList"),!0,{idPerson:t}).then((n=>{var t,a;1===n.data.resCode?e(null===n||void 0===n||null===(t=n.data)||void 0===t||null===(a=t.Data)||void 0===a?void 0:a.map((e=>({ItemValue:e.FldId,ItemContent:(0,C.J)(e.FldName)})))):(0,i.Z)("error",n.data.resMessage,!1)}))},O={Id:0,idBank:"",hesabNo:"",shomareCart:"",shomareSheba:""};var M=t(92186),B=t(27965),H=t(3504);const J=(e,n)=>{var t;let[r]=n;const[s,o]=a.useState([]),c=null===(t=(0,a.useContext)(u.k))||void 0===t?void 0:t.LanguageArray,d=[(0,Z.Z)("bank-account-list-select-bank",c),(0,Z.Z)("bank-account-list-input-card-number",c),(0,Z.Z)("bank-account-list-input-account-number",c),(0,Z.Z)("bank-account-list-shaba-number",c)];return a.useMemo((()=>{o([{element:(0,l.jsx)(M.Z,{SelectableDataArray:e,label:d[0],isSingle:!0,editable:r,value:(0,C.J)(null===r||void 0===r?void 0:r.NameBank)}),name:"idBank",required:!0},{element:r?(0,l.jsx)(H.Z,{value:r.FldShomareCart,label:d[1]}):(0,l.jsx)(B.Z,{label:d[1]}),name:"shomareCart",required:!0},{element:r?(0,l.jsx)(H.Z,{value:r.FldHesabNo,label:d[2]}):(0,l.jsx)(B.Z,{label:d[2]}),name:"hesabNo",required:!0},{element:r?(0,l.jsx)(H.Z,{value:r.FldShomareShaba,label:d[3]}):(0,l.jsx)(B.Z,{label:d[3]}),name:"shomareSheba",required:!0}])}),[e,r,JSON.stringify(d)]),s},D=e=>{let{forceRender:n,setForceRender:t,SelectedElement:r,languageArray:o}=e;const{control:c,formState:u,handleSubmit:b}=(0,N.cI)({defaultValues:O}),{gatheredData:m}=(0,d.Z)(R,n);return(0,l.jsx)(a.Fragment,{children:(0,l.jsx)("form",{onSubmit:b((e=>{!r.length>0?(async(e,n)=>{var t;const a=v.Z.get("user")&&(null===(t=JSON.parse(v.Z.get("user")))||void 0===t?void 0:t.IdPerson);(0,g.Post)("POST","".concat("/api/Acc/AddPersonHesab"),!0,{idPerson:a,...e}).then((e=>{1===e.data.resCode?(0,i.Z)("success",e.data.resMessage,!1).then((()=>n((e=>!e)))):(0,i.Z)("error",e.data.resMessage,!1)}))})(e,t):(async(e,n)=>{var t;const a=v.Z.get("user")&&(null===(t=JSON.parse(v.Z.get("user")))||void 0===t?void 0:t.IdPerson);console.log("ACC=>",e),(0,g.Post)("POST","".concat("/api/Acc/UpdatePersonHesab"),!0,{idPerson:a,...e}).then((e=>{1===e.data.resCode?(0,i.Z)("success",e.data.resMessage,!1).then((()=>n((e=>!e)))):(0,i.Z)("error",e.data.resMessage,!1)}))})({...e,Id:r[0].FldId,idBank:m.filter((n=>n.ItemContent===e.idBank||n.ItemValue===e.idBank))[0].ItemValue},t)})),children:(0,l.jsxs)(s.Z,{marginTop:"1em",spacing:1,children:[(0,l.jsx)(w.Z,{control:c,formState:u,DataArray:J(m,r)}),(0,l.jsx)(f.Z,{disabled:(0,S.Z)("bank-account-list-btn-add-new-account"),label:!r.length>0?(0,Z.Z)("bank-account-list-btn-add-new-bank-account",o):(0,Z.Z)("bank-account-list-btn-edit-bank-account",o)})]})})})};var E=t(20803);const T=()=>{var e;const n=null===(e=(0,a.useContext)(u.k))||void 0===e?void 0:e.LanguageArray,[t,r]=a.useState(!1),[s,o]=a.useState([]);return(0,l.jsx)(a.Fragment,{children:(0,l.jsxs)(E.Z,{maxWidth:"md",children:[(0,l.jsx)(y,{forceRender:t,setForceRender:r,setSelectedElement:o,SelectedElement:s,languageArray:n}),(0,l.jsx)(D,{setForceRender:r,SelectedElement:s,forceRender:t,languageArray:n})]})})}}}]);
//# sourceMappingURL=638.b35bd2ed.chunk.js.map