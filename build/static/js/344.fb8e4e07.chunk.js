"use strict";(self.webpackChunknew_ui=self.webpackChunknew_ui||[]).push([[344],{344:(e,t,a)=>{a.r(t),a.d(t,{default:()=>M});var n=a(20803),l=a(94162),i=a(91888),r=a(72791),o=a(79917),s=a(86775),d=(a(36009),a(88329));const c=()=>{const[e,t]=(0,r.useState)(null);return(0,r.useEffect)((()=>{(async e=>{var t;e("loading");const a=d.Z.get("user")&&(null===(t=JSON.parse(d.Z.get("user")))||void 0===t?void 0:t.IdPerson);(0,s.Post)("POST","".concat("/api/Lab/GetLRCFilterParam"),!0,{idPerson:a}).then((t=>{1===t.data.resCode?e(t.data.Data):((0,o.Z)("error",t.data.resMessage,!1),e(null))}))})(t)}),[]),e};var p=a(91397),m=a(73736);const u=e=>{var t;return[null===e||void 0===e||null===(t=e.labList)||void 0===t?void 0:t.map((e=>({ItemValue:e.Id,ItemContent:(0,m.J)(e.Name)}))),[{ItemContent:(0,p.Z)("lab-patient-type-confirm-not-confirmed"),ItemValue:0},{ItemContent:(0,p.Z)("lab-patient-type-confirm-confirmed"),ItemValue:1},{ItemContent:(0,p.Z)("lab-patient-type-confirm-canceled"),ItemValue:2},{ItemContent:(0,p.Z)("lab-patient-type-confirm-all"),ItemValue:3}]]},b=()=>[(0,p.Z)("lab-patient-type-lab"),(0,p.Z)("lab-patient-type-confirmation"),(0,p.Z)("lab-patient-date-insert"),(0,p.Z)("lab-patient-file-number"),(0,p.Z)("lab-patient-number-request"),(0,p.Z)("lab-patient-name-patient"),(0,p.Z)("lab-patient-family-patient"),(0,p.Z)("lab-patient-patient-id-textbox")];var g=a(58828);const v=()=>{var e;const t=d.Z.get("user")&&(null===(e=JSON.parse(d.Z.get("user")))||void 0===e?void 0:e.IdPerson),[a,n]=(0,r.useState)({idPerson:t,fromDate:(0,g.d)(),toDate:(0,g.d)(),noeTarikh:0,noeTaeed:"",searchType:0,namePatient:"",familyPatient:"",ShomareDarkhast:"",ShomareParvande:"",idLab:"",roozMandeTaJavabdehi:-1,topRecord:20,idPatient:0});return{filterData:a,setFilter:n}};var Z=a(22505),h=a(94225),x=a(80184);const f=e=>{var t,a,n,i,o,s,d,c;const{setFilter:m,labType:u,noeTaeed:b,label_combo_label:g,label_confirm_type:v}=e,f=(0,p.Z)("lab-patient-tarikh-type-paziresh"),I=(0,p.Z)("lab-patient-tarikh-type-javab-dehi"),C=(0,p.Z)("lab-patient-tarikh-type-label"),j=(0,p.Z)("lab-patient-record-count"),y=[{ItemContent:f,ItemValue:0},{ItemContent:I,ItemValue:1}],P=[{ItemContent:"20",ItemValue:20},{ItemContent:"50",ItemValue:50},{ItemContent:"100",ItemValue:100}];return(0,x.jsxs)(r.Fragment,{children:[(0,x.jsx)(h.Z,{initialData:[{ItemValue:null===(t=u[0])||void 0===t?void 0:t.ItemContent,ItemContent:null===(a=u[0])||void 0===a?void 0:a.ItemContent}],isSingle:!0,SelectableDataArray:u,label:g,onChange:e=>{m((t=>({...t,idLab:e})))},enableInitialOnchange:!0}),(0,x.jsx)(h.Z,{initialData:[{ItemValue:null===(n=y[0])||void 0===n?void 0:n.ItemContent,ItemContent:null===(i=y[0])||void 0===i?void 0:i.ItemContent}],isSingle:!0,SelectableDataArray:y,label:C,onChange:e=>{m((t=>({...t,noeTarikh:e})))},enableInitialOnchange:!0}),(0,x.jsx)("div",{style:{marginBlock:"-.5em"},children:(0,x.jsx)(Z.Z,{ExcludeOneMonth:!0,disableMt:!0,onChange:e=>{m((t=>({...t,fromDate:e.FromDate,toDate:e.ToDate})))}})}),(0,x.jsxs)(l.Z,{style:{marginTop:"-.5em"},direction:"row-reverse",gap:"1em",children:[(0,x.jsx)(h.Z,{initialData:[{ItemValue:null===(o=b[0])||void 0===o?void 0:o.ItemContent,ItemContent:null===(s=b[0])||void 0===s?void 0:s.ItemContent}],isSingle:!0,SelectableDataArray:b,label:v,onChange:e=>{m((t=>({...t,noeTaeed:e})))},enableInitialOnchange:!0}),(0,x.jsx)(h.Z,{initialData:[{ItemValue:null===(d=P[0])||void 0===d?void 0:d.ItemContent,ItemContent:null===(c=P[0])||void 0===c?void 0:c.ItemContent}],isSingle:!0,SelectableDataArray:P,label:j,onChange:e=>{m((t=>({...t,topRecord:e})))},enableInitialOnchange:!0})]})]})};var I=a(27965),C=a(34675);a(21044);const j=e=>{const{setFilter:t,label_patient_number_request:a,label_patient_name_patient:n,label_patient_family_patient:i,label_file_number:o,lab_patient_patient_id_textbox:s}=e;return(0,x.jsxs)(r.Fragment,{children:[(0,x.jsxs)(l.Z,{direction:"row",gap:"1em",children:[(0,x.jsx)(C.Z,{label:s,onChange:e=>{t((t=>({...t,idPatient:0===e.length?0:e})))}}),(0,x.jsx)(I.Z,{label:o,onChange:e=>{t((t=>({...t,ShomareParvande:e})))},isOctalAllowed:!0})]}),(0,x.jsx)(l.Z,{direction:"row",gap:".5em",children:(0,x.jsx)(C.Z,{label:i,onChange:e=>{t((t=>({...t,familyPatient:e})))}})})]})};var y=a(97645);const P=(0,a(1330).cn)(!1);var S=a(45620);const _=e=>{const[t,a]=(0,r.useState)([]),[n]=(0,y.KO)(P),l=(0,S.Z)(e);return(0,r.useEffect)((()=>{e.idLab.toString().length>0&&(async(e,t)=>{var a;t("loading");const n=d.Z.get("user")&&(null===(a=JSON.parse(d.Z.get("user")))||void 0===a?void 0:a.IdPerson);0===e.fromDate.length&&0===e.toDate.length||(0,s.Post)("POST","".concat("/api/Lab/GetListPatientForConferm"),!0,{...e,idPerson:n}).then((e=>{1===e.data.resCode?t(e.data.Data):((0,o.Z)("error",e.data.resMessage,!1),t(null))}))})(e,a)}),[JSON.stringify(l),n]),t};var O=a(8771),D=a(30178);const F=e=>{let{content:t,setOpenOperation:a,openOperation:n}=e;const i="en"===D.ZP.language?"left":"right",o=(0,p.Z)("lab-patient-number-request"),s=(0,p.Z)("general-public-label-patient"),d=(0,p.Z)("lab-patient-tarikh-type-javab-dehi"),c=((0,p.Z)("general-public-label-confirmed"),(0,p.Z)("new-referral-label-id"));JSON.parse(sessionStorage.getItem("lab"));return(0,x.jsx)(r.Fragment,{children:(0,x.jsx)("div",{onClick:()=>{a((e=>{const a=e.includes(null===t||void 0===t?void 0:t.Id)?e.filter((e=>e!==(null===t||void 0===t?void 0:t.Id))):[...e,null===t||void 0===t?void 0:t.Id];return sessionStorage.setItem("lab",JSON.stringify(a)),a}))},children:(0,x.jsxs)(l.Z,{gap:".5em",children:[(0,x.jsxs)("p",{style:{textAlign:i},children:[o,"\xa0:\xa0",(0,x.jsx)("span",{style:{textAlign:"left"},children:null===t||void 0===t?void 0:t.FldNo_Text})]}),(0,x.jsxs)("p",{style:{textAlign:i},children:[c,"\xa0:\xa0",null===t||void 0===t?void 0:t.idPatient]}),(0,x.jsxs)("p",{style:{textAlign:i},children:[s,"\xa0:\xa0",(0,m.J)(null===t||void 0===t?void 0:t.NamePatient)]}),(0,x.jsxs)("p",{style:{textAlign:i},children:[d,"\xa0:\xa0",null===t||void 0===t?void 0:t.DateAnswer]})]})})})};var w=a(17205),T=a(30433),k=a(16623);const L=()=>[(0,p.Z)("lab-patient-see-asnwers-lab"),(0,p.Z)("lab-patient-operation-accept-answer-operation"),(0,p.Z)("lab-patient-cancel-answer"),(0,p.Z)("lab-patient-reject-answer"),(0,p.Z)("lab-patient-confirm-see-answer"),(0,p.Z)("lab-patient-confirm-accept-answer"),(0,p.Z)("lab-patient-confirm-cancel-answer"),(0,p.Z)("lab-patient-confirm-reject-answer"),(0,p.Z)("lab-patient-reject-reason")],J=e=>{let{content:t,setForceRender:a}=e;const[,n]=(0,y.KO)(P),[c,p]=(0,r.useState)(!1),m=L(),u=e=>{let{label:t,fn:n,disabled:l}=e;return(0,x.jsx)(w.Z,{disabled:l||c,variant:"contained",sx:{color:"".concat(T.l.ColorPrimary," !important")},onClick:()=>{n(),a((e=>!e))},children:t})};return(0,x.jsxs)(r.Fragment,{children:[(0,x.jsx)("hr",{style:{marginBlock:"1em"}}),c?(0,x.jsx)(i.Z,{sx:{mb:".5em"}}):(0,x.jsx)(x.Fragment,{}),(0,x.jsxs)(l.Z,{gap:".5em",mb:".5em",children:[(0,x.jsx)(u,{label:m[0],fn:()=>{(0,o.Z)("warning",m[4],!0,(()=>{(async(e,t)=>{var a;t(!0);const n=d.Z.get("user")&&(null===(a=JSON.parse(d.Z.get("user")))||void 0===a?void 0:a.IdPerson);(0,s.Post)("POST","".concat("/api/Lab/GetLabResultPatientReport"),!0,{idPerson:n,idLabConfer:e}).then((e=>{1===e.data.resCode?(0,k.s)("data:application/pdf;base64,".concat(e.data.Data)):(0,o.Z)("error",e.data.resMessage,!1),t(!1)}))})(null===t||void 0===t?void 0:t.Id,p)}))}}),(0,x.jsx)(u,{disabled:null===t||void 0===t?void 0:t.FldConfermDoctor,label:m[1],fn:()=>{(0,o.Z)("warning",m[5],!0,(()=>{(async(e,t,a)=>{var n;t(!0);const l=d.Z.get("user")&&(null===(n=JSON.parse(d.Z.get("user")))||void 0===n?void 0:n.IdPerson);(0,s.Post)("POST","".concat("/api/Lab/ConfermResultPatientByDoctor"),!0,{idPerson:l,idLabConfer:e}).then((e=>{1===e.data.resCode?(0,o.Z)("success",e.data.resMessage,!1):(0,o.Z)("error",e.data.resMessage,!1),t(!1),a((e=>!e))}))})(null===t||void 0===t?void 0:t.Id,p,n)}))}}),(0,x.jsx)(u,{label:m[2],fn:()=>{(0,o.Z)("warning",m[6],!0,(()=>{(async(e,t,a)=>{var n;t(!0);const l=d.Z.get("user")&&(null===(n=JSON.parse(d.Z.get("user")))||void 0===n?void 0:n.IdPerson);(0,s.Post)("POST","".concat("/api/Lab/UnConfermResultPatientByDoctor"),!0,{idPerson:l,idLabConfer:e}).then((e=>{1===e.data.resCode?(0,o.Z)("success",e.data.resMessage,!1):(0,o.Z)("error",e.data.resMessage,!1),t(!1),a((e=>!e))}))})(null===t||void 0===t?void 0:t.Id,p,n)}))}}),(0,x.jsx)(u,{label:m[3],fn:()=>{(0,o.Z)("warning",m[7],!0,(()=>{(0,o.Z)("fire","",!0,(()=>{(async(e,t,a)=>{var n;t(!0);const l=d.Z.get("user")&&(null===(n=JSON.parse(d.Z.get("user")))||void 0===n?void 0:n.IdPerson);(0,s.Post)("POST","".concat("/api/Lab/RadeDarkhastResultPatientByDoctor"),!0,{idPerson:l,idLabConfer:e}).then((e=>{1===e.data.resCode?(0,o.Z)("success",e.data.resMessage,!1):(0,o.Z)("error",e.data.resMessage,!1),t(!1),a((e=>!e))}))})(null===t||void 0===t?void 0:t.Id,p,n)}),m[8],(()=>{}),!1)}))}})]})]})},N=e=>{let{content:t,setOpenOperation:a,openOperation:n}=e;const[i,o]=(0,r.useState)(!1),[s,d]=(0,r.useState)((()=>JSON.parse(sessionStorage.getItem("lab"))));return(0,r.useEffect)((()=>{d(sessionStorage.getItem("lab"))}),[JSON.parse(sessionStorage.getItem("lab"))]),(0,x.jsx)(r.Fragment,{children:(0,x.jsxs)(l.Z,{padding:".3em",borderRadius:"20px",sx:{backgroundColor:t.FldConfermDoctor?"lightgreen":(!1!==t.FldConfermDoctor||t.FldEbtalShode)&&!1===t.FldConfermDoctor&&!0===t.FldEbtalShode?"lightpink":"white"},children:[(0,x.jsx)(F,{content:t,setOpenOperation:a,openOperation:n}),(0,x.jsx)(x.Fragment,{}),null!==n&&void 0!==n&&n.includes(null===t||void 0===t?void 0:t.Id)||null!==s&&void 0!==s&&s.includes(null===t||void 0===t?void 0:t.Id)?(0,x.jsx)(J,{content:t,setForceRender:o}):(0,x.jsx)(x.Fragment,{})]})})};var V=a(11790),R=a(72279);const A=e=>{var t,a;let{listPatient:n}=e;const[i,o]=(0,r.useState)((()=>JSON.parse(sessionStorage.getItem("lab"))||[])),s=(0,p.Z)("general-public-flat-alert-no-data"),d=(0,R.Z)(null===n||void 0===n?void 0:n.listConfer);return(0,x.jsx)(r.Fragment,{children:(0,x.jsx)(l.Z,{mt:"1em",gap:".5em",display:d?"grid":"",sx:{gridTemplateColumns:d?"repeat(2, 1fr) !important":"",gridAutoFlow:"revert-layer",direction:"rtl",alignItems:d?"flex-start":""},children:0===(null===n||void 0===n||null===(t=n.listConfer)||void 0===t?void 0:t.length)?(0,x.jsx)(O.Z,{sx:{mt:"1em",display:"flex",justifyContent:"center"},severity:"warning",children:s}):null===n||void 0===n||null===(a=n.listConfer)||void 0===a?void 0:a.map((e=>(0,x.jsx)(V.Z,{jsx:(0,x.jsx)(N,{content:e,setOpenOperation:o,openOperation:i}),cardProps:{padding:".3em",borderRadius:"20px"}},e.Id)))})})},M=()=>{const e=c(),[t,a]=u(e),[o,s,d,p,m,g,Z,h]=b(),{filterData:I,setFilter:C}=v(),y=_(I);return(0,x.jsx)(r.Fragment,{children:(0,x.jsxs)(n.Z,{children:[t?(0,x.jsxs)(l.Z,{gap:".5em",mt:"1em",children:[(0,x.jsx)(f,{setFilter:C,labType:t,noeTaeed:a,label_combo_label:o,label_confirm_type:s}),(0,x.jsx)(j,{setFilter:C,label_patient_number_request:m,label_patient_name_patient:g,label_patient_family_patient:Z,label_file_number:p,lab_patient_patient_id_textbox:h})]}):(0,x.jsx)(i.Z,{}),"loading"===y?(0,x.jsx)(i.Z,{sx:{mt:"1em"}}):(0,x.jsx)(A,{listPatient:y})]})})}}}]);
//# sourceMappingURL=344.fb8e4e07.chunk.js.map