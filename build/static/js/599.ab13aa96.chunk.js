"use strict";(self.webpackChunknew_ui=self.webpackChunknew_ui||[]).push([[599],{76313:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(72791);const i=e=>{const[t,n]=a.useState(null);a.useEffect((()=>{const e=sessionStorage.getItem("userFile");e&&e.length>0&&n(JSON.parse(e));const t=e=>{if("userFile"===e.key){const t=e.newValue;n(t&&t.length>0?t:null)}};return window.addEventListener("storage",t),()=>{window.removeEventListener("storage",t)}}),[]);const i=null===e||void 0===e?void 0:e.sort(((e,n)=>{if(t){const a=t.indexOf(e.Id),i=t.indexOf(n.Id);return-1===a?1:-1===i?-1:a-i}}));return t?i:e}},50494:(e,t,n)=>{n.d(t,{_:()=>a});const a=(0,n(1330).cn)(!1)},70732:(e,t,n)=>{n.d(t,{Z:()=>q});var a=n(72791),i=n(82873),o=n(20803),r=n(94247),s=n(79917),l=n(91397),c=n(86775);n(36009);const d=(e,t)=>{const n=(0,l.Z)("current-patients-alert-end-treamtment-sure");return e=>{(0,s.Z)("warning",n,!0,(()=>(0,c.Post)("POST","".concat("/api/DoctorWorkList/EndOfTreatment"),!0,{idAppWorkList:null===e||void 0===e?void 0:e.Id}).then((e=>{1===e.data.resCode?(0,s.Z)("success",e.data.resMessage,!1):(0,s.Z)("warning",e.data.resMessage,!1),t((e=>!e))}))))}};var u=n(67675),m=n(46843),g=n(57689);const v=()=>{const e=(0,l.Z)("current-patients-alert-confirm-cancel-redirect"),t=(0,l.Z)("current-patients-alert-cancel-successful");return(n,a)=>{(0,s.Z)("warning",e,!0,(()=>{(0,c.Post)("POST","".concat("/api/DoctorWorkList/CancelErja"),!0,{idAppWorkList:null===n||void 0===n?void 0:n.Id,idPerson:null===n||void 0===n?void 0:n.IdPerson,cancleCouse:""}).then((e=>{1===e.data.resCode?((0,s.Z)("success",t,!1),a((e=>!e))):(0,s.Z)("warning",e.data.resMessage,!1)}))}))}};var p=n(40918),Z=n(97645),I=n(50494);var S=n(39230),h=n(73736);var x=n(16027),b=n(94162),C=n(17205),f=n(91888),j=n(94225),P=n(30433),y=n(30178),k=n(26438),O=n(80184);const F=e=>{let{Patient:t,documentSummaryList:n}=e;const i=(0,p.Z)(),o=(0,g.s0)(),[r,s]=(0,a.useState)(!1),[c,d]=(0,a.useState)(),u=(0,l.Z)("patients-for-visit-summary-input-label"),m={IdPatient:t.IdPatient,Id:c},v=(0,l.Z)("general-public-label-print"),Z=(0,l.Z)("genral-public-label-show-by");return(0,O.jsx)(a.Fragment,{children:(0,O.jsx)(b.Z,{children:Array.isArray(n)?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(j.Z,{SelectableDataArray:n,isSingle:!0,label:u,onChange:d,isEnglish:"en"===y.ZP.language,initialData:1===(null===n||void 0===n?void 0:n.length)?[{ItemContent:n[0].ItemContent,ItemValue:n[0].ItemContent}]:null}),(0,O.jsxs)(b.Z,{gap:".3em",mt:".5em",children:[(0,O.jsx)(C.Z,{variant:"contained",sx:{color:"".concat(P.l.ColorPrimary," !important")},onClick:()=>{(0,k.$)(m,"print",s,o,i)},disabled:!c,children:v}),(0,O.jsx)(C.Z,{variant:"contained",sx:{color:"".concat(P.l.ColorPrimary," !important")},onClick:()=>{(0,k.$)(m,"preview",s,o,i)},disabled:!c,children:Z})]}),r?(0,O.jsx)(f.Z,{sx:{mt:"1em"}}):(0,O.jsx)(O.Fragment,{})]}):(0,O.jsx)(O.Fragment,{})})})},w=e=>{let{Patient:t,setForceRender:n,disableActions:i,setQuickOperations:s,memoQuickOperationsFileSummary:c,HandleSetQuickActions:b,documentSummaryList:C}=e;const[f,j]=(0,a.useState)(!1),{t:P,i18n:y}=(0,S.$G)(),k=((e,t,n,i,o,r,s)=>{var c;const S=(0,p.Z)(),h=null===(c=(0,a.useContext)(u.k))||void 0===c?void 0:c.LanguageArray,{pathname:x}=(0,g.TH)(),[,b]=(v(),(0,Z.KO)(I._)),C=(d(0,t),JSON.parse(localStorage.getItem("icons"))),f="data:image/svg+xml;base64,";return[{...n?{}:{title:(0,l.Z)("general-public-add-new-confer",h),image:f+(null===C||void 0===C?void 0:C.MenueIcon["Serviceregistration.svg"]),path:S>1024?"/main/AddNewConfer":"/AddNewConfer",func:sessionStorage.removeItem("savedServices"),disabled:(0,m.Z)(x.toLowerCase()==="/CurrentPatients".toLowerCase()?"current-patient-action-set-confer":"patient-list-action-set-confer")}},{title:(0,l.Z)("current-patients-patient-actions-list-service-confer",h),image:f+(null===C||void 0===C?void 0:C.MenueIcon["Viewservices.svg"]),path:S>1024?"/main/ListServiceConfer":"/ListServiceConfer",disabled:(0,m.Z)(x.toLowerCase()==="/CurrentPatients".toLowerCase()?"current-patient-action-list-service-confer":"patient-list-action-list-service-confer")},{...n?{}:{title:(0,l.Z)("current-patients-patient-actions-medical-form",h),image:f+(null===C||void 0===C?void 0:C.MenueIcon["Medicalrecord.svg"]),path:S>1024?"/main/AddNewElectronicForm":"/AddNewElectronicForm",disabled:(0,m.Z)(x.toLowerCase()==="/CurrentPatients".toLowerCase()?"current-patient-action-medical-form":"patient-list-action-medical-form")}},{title:(0,l.Z)("current-patients-patient-actions-service-summary",h),image:f+(null===C||void 0===C?void 0:C.MenueIcon["Summary Case.svg"]),func:()=>{r(s.Id,2,o)},disabled:(0,m.Z)(x.toLowerCase()==="/CurrentPatients".toLowerCase()?"current-patient-action-confer-summurary":"patient-list-action-confer-summurary")}]})(0,n,i,0,s,b,t),w=((e,t,n,i)=>{var o;const r=(0,p.Z)(),s=null===(o=(0,a.useContext)(u.k))||void 0===o?void 0:o.LanguageArray,{pathname:c}=(0,g.TH)(),S=v(),[,h]=(0,Z.KO)(I._),x=d(0,t),b=JSON.parse(localStorage.getItem("icons")),C="data:image/svg+xml;base64,";return[{...n?{}:{title:(0,l.Z)("current-patients-patient-actions-end-treatment",s),image:C+(null===b||void 0===b?void 0:b.GeneralIcon["EndOfActivity.svg"]),func:x,disabled:(0,m.Z)(c.toLowerCase()==="/CurrentPatients".toLowerCase()?"current-patient-action-end-treatment":"patient-list-action-end-treatment")}},{...n?{}:{title:(0,l.Z)("current-patients-patient-actions-cancel-referral",s),image:C+(null===b||void 0===b?void 0:b.GeneralIcon["CanceledReferral.svg"]),func:S,disabled:(0,m.Z)(c.toLowerCase()==="/CurrentPatients".toLowerCase()?"current-patient-action-cancel-referral":"patient-list-action-cancel-redirect")}},{title:(0,l.Z)("general-public-refer-to",s),image:C+(null===b||void 0===b?void 0:b.GeneralIcon["ReferTo.svg"]),path:r>1024?"/main/ReferTo":"/ReferTo",disabled:(0,m.Z)(c.toLowerCase()==="/CurrentPatients".toLowerCase()?"current-patient-action-refer-to":"patient-list-action-refer-to")}]})(0,n,i),L=(0,a.useContext)(u.k),N="data:image/svg+xml;base64,",A=JSON.parse(localStorage.getItem("icons")),T="".concat((0,l.Z)("general-public-address"),": ").concat((0,h.J)(t.PatientAddress)),J="".concat((0,l.Z)("general-public-mobile-number"),":\xa0").concat(t.PatientMobile);return(0,O.jsxs)(a.Fragment,{children:[(0,O.jsx)(r.Z,{setForceRender:n,ImageSource:N+(null===A||void 0===A?void 0:A.GeneralIcon["Address.svg"]),paragraph:T,i18n:y}),(0,O.jsx)(r.Z,{setForceRender:n,ImageSource:N+(null===A||void 0===A?void 0:A.GeneralIcon["Mobile.svg"]),paragraph:J,i18n:y}),(0,O.jsx)(o.Z,{children:(0,O.jsx)("hr",{})}),null===k||void 0===k?void 0:k.map((e=>!(null!==e&&void 0!==e&&e.disabled)&&(0,O.jsx)(r.Z,{ImageSource:null===e||void 0===e?void 0:e.image,paragraph:null===e||void 0===e?void 0:e.title,clickable:!0,navigate:L.navigate,path:e.path,Patient:t,func:null===e||void 0===e?void 0:e.func,setForceRender:n,i18n:y},L.uuidV4()))),c?(0,O.jsx)(x.Z,{element:(0,O.jsx)(o.Z,{sx:{bgcolor:"white",paddingY:".3em",borderRadius:"13px"},children:(0,O.jsx)(F,{Patient:t,documentSummaryList:C})}),dependecies:[c]}):(0,O.jsx)(O.Fragment,{}),null===w||void 0===w?void 0:w.map((e=>!(null!==e&&void 0!==e&&e.disabled)&&(0,O.jsx)(r.Z,{ImageSource:null===e||void 0===e?void 0:e.image,paragraph:null===e||void 0===e?void 0:e.title,clickable:!0,navigate:L.navigate,path:e.path,Patient:t,func:null===e||void 0===e?void 0:e.func,setForceRender:n,i18n:y},L.uuidV4())))]})};var L=n(96015),N=n(13811);const A=(e,t)=>{let n=JSON.parse(sessionStorage.getItem("userFile"))||[];if(-1===n.indexOf(t.Id))n.push(t.Id),sessionStorage.setItem("userFile",JSON.stringify(n)),e(JSON.parse(sessionStorage.getItem("userFile")));else{let a=n.indexOf(t.Id);n.splice(a,1),sessionStorage.setItem("userFile",JSON.stringify(n)),e(JSON.parse(sessionStorage.getItem("userFile")))}},T=e=>{var t;const[n,i]=(0,a.useState)(JSON.parse(sessionStorage.getItem("userFile"))||[]),[o,r]=(0,a.useState)(JSON.parse(sessionStorage.getItem("quickActions"))||[]),s=(e=>{var t;const n=null===(t=(0,a.useContext)(u.k))||void 0===t?void 0:t.LanguageArray,i=JSON.parse(localStorage.getItem("icons")),o="data:image/svg+xml;base64,";return[{title:"".concat((0,l.Z)("general-public-insurance-type",n),": ").concat((0,h.J)(e.InsuranceName)),image:o+(null===i||void 0===i?void 0:i.GeneralIcon["Insurance.svg"])},{title:"".concat((0,l.Z)("general-public-label-patient",n),": ").concat((0,h.J)(e.NamePatient),"\xa0").concat((0,h.J)(e.FamilyPatient),"\xa0").concat(e.AgePatient,"\xa0\u0633\u0627\u0644"),image:o+(null===i||void 0===i?void 0:i.GeneralIcon["PatientName.svg"])}]})(e),c=(0,a.useContext)(u.k),{i18n:d}=(0,S.$G)();return[n,i,s,c,null===(t=(0,a.useContext)(u.k))||void 0===t?void 0:t.LanguageArray,JSON.parse(localStorage.getItem("icons")),"data:image/svg+xml;base64,","".concat((0,l.Z)("general-public-label-presence-time"),":\xa0").concat(e.DateHozoor,"\xa0\xa0").concat(e.TimeHozoor),d,o,r]};var J=n(48701),M=n(70370),D=n(33957);const R=e=>{let{Patient:t,setForceRender:n}=e;const i=(0,l.Z)("general-public-btn-save"),o=(0,l.Z)("general-public-label-presence-time"),r=(0,l.Z)("general-public-label-presence-date"),[d,u]=(0,a.useState)({timeHoozoor:(0,D.p)(null===t||void 0===t?void 0:t.TimeHozoor),dateHoozoor:""}),m=((e,t,n,a)=>{const i=(0,l.Z)("current-patients-label-change-presence");return n=>{(0,s.Z)("warning",i,!0,(()=>(0,c.Post)("POST","".concat("/api/DoctorWorkList/SetDateAndTimeHozzor"),!0,{dateHozoor:e,timeHozoor:t,idAppWorkList:null===n||void 0===n?void 0:n.Id}).then((e=>{1===e.data.resCode?(0,s.Z)("success",e.data.resMessage,!1):(0,s.Z)("warning",e.data.resMessage,!1)})).then((()=>{a((e=>!e))}))))}})(d.dateHoozoor,d.timeHoozoor,0,n);return(0,O.jsx)(a.Fragment,{children:(0,O.jsxs)(b.Z,{gap:".5em",children:[(0,O.jsxs)(b.Z,{direction:"row",gap:".5em",justifyContent:"space-between",children:[(0,O.jsx)(J.Z,{initalValue:null===t||void 0===t?void 0:t.TimeHozoor,OutputInMinutes:!0,label:o,onChange:e=>{u((t=>({...t,timeHoozoor:e})))},fullWidth:!0}),(0,O.jsx)(M.Z,{disableInit:!0,initialValue:null===t||void 0===t?void 0:t.DateHozoor,Placeholder:r,onChange:e=>{u((t=>({...t,dateHoozoor:e})))},disableToday:!1,fullWidth:!0})]}),(0,O.jsx)("br",{}),(0,O.jsx)(C.Z,{variant:"contained",onClick:()=>{m(t)},sx:{mb:"1em",mt:"-.6em",color:"".concat(P.l.ColorPrimary," !important")},children:i})]})})};var _=n(87810),H=n(61134),E=n(9396);const z=e=>{let{Patient:t,setForceRender:n,detections:i}=e;(0,p.Z)();const o=(0,l.Z)("general-public-label-diagnose"),r=(0,l.Z)("general-public-btn-save"),d=(0,a.useMemo)((()=>i),[JSON.stringify(i)]),u=null===d||void 0===d?void 0:d.map((e=>({ItemContent:(0,h.J)(null===e||void 0===e?void 0:e.Name),ItemValue:null===e||void 0===e?void 0:e.Id}))),{control:m,formState:g,handleSubmit:v}=(0,H.cI)({defaultValues:{idAppWorkList:null===t||void 0===t?void 0:t.Id,idTashkhis:""}}),Z=(e=>{const t=(0,l.Z)("current-patients-label-change-detection");return n=>{(0,s.Z)("warning",t,!0,(()=>(0,c.Post)("POST","".concat("/api/DoctorWorkList/EditTashkhisErja"),!0,{...n}).then((e=>{console.log("response->",{response:e,data:n}),1===e.data.resCode?(0,s.Z)("success",e.data.resMessage,!1):(0,s.Z)("warning",e.data.resMessage,!1)})).then((()=>{e((e=>!e))}))))}})(n);return(0,O.jsx)(a.Fragment,{children:(0,O.jsx)("form",{onSubmit:v((e=>{Z(e)})),onWheel:e=>{e.stopPropagation()},onTouchMove:e=>{e.stopPropagation()},children:(0,O.jsxs)(b.Z,{gap:".5em",children:[u?(0,O.jsx)(_.Z,{element:(0,O.jsx)(j.Z,{initialData:[{ItemContent:(0,h.J)(null===t||void 0===t?void 0:t.NameDiagnosis),ItemValue:(0,h.J)(null===t||void 0===t?void 0:t.NameDiagnosis)}],isSingle:!0,SelectableDataArray:u,label:o,enableInitialOnchange:!0}),control:m,errors:g.errors,name:"idTashkhis",required:!0}):(0,O.jsx)(f.Z,{}),(0,O.jsx)(E.Z,{label:r})]})})})},G=(e,t,n)=>{let a=JSON.parse(sessionStorage.getItem("quickActions"))||[];if(a.some((t=>t.patientId===e))){let t=a.findIndex((t=>t.patientId===e));a.splice(t,1),sessionStorage.setItem("quickActions",JSON.stringify(a)),n(JSON.parse(sessionStorage.getItem("quickActions")))}else a.push({patientId:e,actionType:t}),sessionStorage.setItem("quickActions",JSON.stringify(a)),n(JSON.parse(sessionStorage.getItem("quickActions")))};n(84074);var V=n(68125),W=n(89841);const q=e=>{let{Patient:t,setForceRender:n,bgColor:o,detections:s,disableActions:c,documentSummaryList:d}=e;const u=(0,l.Z)("general-public-label-diagnose"),[m,g,v,p,Z,I,S,x,b,C,f]=T(t),j=[null===t||void 0===t?void 0:t.TedadMorajee,null===t||void 0===t?void 0:t.TedadForm],y=null!==j&&void 0!==j&&j.every((e=>e>0))?"lightgreen":(null===t||void 0===t?void 0:t.TedadMorajee)>0?"skyblue":(null===t||void 0===t?void 0:t.TedadForm)>0?"lightpink":(null===j||void 0===j?void 0:j.every((e=>0===e)))&&null,k=(0,a.useMemo)((()=>C.some((e=>e.patientId===t.Id&&1===e.actionType))),[JSON.stringify(C)]),F=(0,a.useMemo)((()=>C.some((e=>e.patientId===t.Id&&0===e.actionType))),[JSON.stringify(C)]),J=(0,a.useMemo)((()=>C.some((e=>e.patientId===t.Id&&2===e.actionType))),[JSON.stringify(C)]);return(0,O.jsxs)("div",{className:i.Z.CardContent,style:{backgroundColor:y||o||"",color:"".concat(P.l.ColorPrimary)},children:[(0,O.jsx)(L.Z,{sx:{all:"inherit",p:0},children:null===v||void 0===v?void 0:v.map((e=>(0,O.jsx)(r.Z,{ImageSource:null===e||void 0===e?void 0:e.image,paragraph:null===e||void 0===e?void 0:e.title,setForceRender:n,i18n:b},p.uuidV4())))}),(0,O.jsx)(r.Z,{ImageSource:S+(null===I||void 0===I?void 0:I.GeneralIcon["Detection.svg"]),paragraph:"".concat(u,":\xa0").concat((0,h.J)(t.NameDiagnosis)),setForceRender:n,i18n:b,clickable:!(null!==t&&void 0!==t&&t.CancelByDoctor||null!==t&&void 0!==t&&t.EndOfTreatment),Patient:t,func:()=>{null!==t&&void 0!==t&&t.CancelByDoctor||null!==t&&void 0!==t&&t.EndOfTreatment||G(t.Id,1,f)}}),k&&!m.includes(t.Id)?(0,O.jsx)(z,{Patient:t,setForceRender:n,detections:s}):(0,O.jsx)(O.Fragment,{}),(0,O.jsx)(r.Z,{ImageSource:S+(null===I||void 0===I?void 0:I.GeneralIcon["AttendenceTime.svg"]),paragraph:x,setForceRender:n,i18n:b,clickable:!(null!==t&&void 0!==t&&t.CancelByDoctor||null!==t&&void 0!==t&&t.EndOfTreatment),Patient:t,func:()=>{null!==t&&void 0!==t&&t.CancelByDoctor||null!==t&&void 0!==t&&t.EndOfTreatment||G(t.Id,0,f)}}),""!==(null===t||void 0===t?void 0:t.DescErja)?(0,O.jsxs)("h4",{style:{color:"red",paddingInline:".3em",borderRadius:"3px"},children:[(0,l.Z)("general-public-description",Z)," ",":\xa0",(0,h.J)(null===t||void 0===t?void 0:t.DescErja)]}):(0,O.jsx)(O.Fragment,{}),m.includes(t.Id)||F||k?(0,O.jsx)(O.Fragment,{}):(0,O.jsx)(N.Z,{onClick:()=>{A(g,t)},sx:{alignSelf:"center"},children:(0,O.jsx)(V.Z,{color:"colorPrimer"})}),m.includes(t.Id)?(0,O.jsx)(w,{Patient:t,setForceRender:n,disableActions:c,setQuickOperations:f,memoQuickOperationsFileSummary:J,HandleSetQuickActions:G,documentSummaryList:d}):(0,O.jsx)(O.Fragment,{}),m.includes(t.Id)?(0,O.jsx)(N.Z,{onClick:()=>{A(g,t)},sx:{alignSelf:"center"},children:(0,O.jsx)(W.Z,{color:"colorPrimer"})}):(0,O.jsx)(O.Fragment,{}),F&&!m.includes(t.Id)?(0,O.jsx)(R,{Patient:t,setForceRender:n}):(0,O.jsx)(O.Fragment,{})]})}},82873:(e,t,n)=>{n.d(t,{Z:()=>a});const a={frameGradient:"Current_Patient_frameGradient__fPhh6",PatientCard:"Current_Patient_PatientCard__izZ8+",CardContent:"Current_Patient_CardContent__S+RLf",patientContainer:"Current_Patient_patientContainer__O08Fh"}}}]);
//# sourceMappingURL=599.ab13aa96.chunk.js.map